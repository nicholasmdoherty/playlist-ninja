{"version":3,"sources":["common/constants.js","modules/spotify-sign-in/SpotifyLoginButton.jsx","common/components/Spacer.jsx","modules/spotify-sign-in/LoginPage.jsx","modules/spotify-sign-in/SpotifyLogoutButton.jsx","common/components/Navbar.jsx","redux/actions/playlistActions.js","modules/profile/subcomponents/personal-playlists/PlaylistCard.jsx","modules/profile/subcomponents/personal-playlists/PersonalPlaylists.jsx","modules/profile/subcomponents/ProfileInfo.jsx","modules/profile/subcomponents/TopArtists.jsx","modules/profile/subcomponents/TopTracks.jsx","modules/profile/Profile.jsx","modules/playlist-builder/subcomponents/PlaylistInfo.jsx","modules/playlist-builder/subcomponents/PlaylistTrackStatistics.jsx","modules/playlist-builder/subcomponents/TrackTable.jsx","modules/playlist-builder/subcomponents/PlaylistTracklist.jsx","modules/playlist-builder/subcomponents/Recommendations.jsx","modules/playlist-builder/PlaylistBuilder.jsx","modules/mutual-melodies-preference-quiz/subcomponents/LikertScaleInput.jsx","modules/mutual-melodies-preference-quiz/subcomponents/Question.jsx","modules/mutual-melodies-preference-quiz/MutualMelodiesPreferenceQuiz.jsx","App.js","redux/actions/apiActions.js","serviceWorker.js","redux/reducers/rootReducer.js","redux/reducers/apiReducer.js","redux/reducers/playlistReducer.js","index.js","store.js"],"names":["clientID","setCookie","cname","cvalue","expirationHours","d","Date","setTime","getTime","expires","toUTCString","document","cookie","deepCamelCaseKeys","variable","Array","forEach","object","index","Object","keys","key","camelCaseKeys","isBelowSmallBreakpoint","window","innerWidth","SpotifyLoginButton","props","autoBind","data","token","access_token","location","reload","buttonText","clientId","redirectUri","onSuccess","this","handleAccessToken","onFailure","error","console","log","scope","className","Component","Spacer","style","height","percentage","pixels","LoginPage","id","SpotifyLogoutButton","Button","variant","onClick","handleLogout","Navbar","addEventListener","forceUpdate","noButtons","to","setSelectedPlaylist","playlistId","spotifyApi","dispatch","a","playlistResponse","getPlaylist","then","body","notAllTracks","tracks","next","items","offset","getPlaylistTracks","concat","hash","type","payload","PlaylistCard","updateSelectedPlaylist","api","playlist","Swal","fire","title","text","showCancelButton","confirmButtonText","cancelButtonText","allowEscapeKey","allowOutsideClick","updatePlaylists","unfollowConfirmation","result","value","unfollowPlaylist","name","dismiss","DismissReason","cancel","Col","xs","md","images","Image","src","url","public","selectPlaylist","connect","PersonalPlaylists","state","playlists","getPersonalPlaylistData","userId","loadEditablePlaylists","setState","Row","map","editablePlaylists","playlistsResponse","getUserPlaylists","limit","response","notAllPlaylists","morePlaylistsResponse","filter","owner","collaborative","loadUsersEditablePlaylists","ProfileInfo","profile","displayName","email","followers","externalUrls","total","TopArtists","_isMounted","topArtists","getMyTopArtists","time_range","topShortTermArtists","topMediumTermArtists","topLongTermArtists","Tabs","defaultActiveKey","Tab","eventKey","topArtist","lg","roundedCircle","fluid","TopTracks","topTracks","getMyTopTracks","topShortTermTracks","topMediumTermTracks","topLongTermTracks","topTrack","album","Profile","getMe","PlaylistInfo","sm","description","trackIds","playlistTrack","push","track","haveToLoop","length","trackStatistics","getAudioFeaturesForTracks","splice","audioFeatures","numOfStatisticsReceived","hypeScores","trackStatistic","danceability","energy","valence","tempo","popularity","trackUri","score","sortedHypeScores","sort","b","ascendingScores","descendingScores","reverse","curvedScores","createPlaylist","addTracksToPlaylist","PlaylistTrackStatistics","loudness","durationMs","calculateAverageStatistics","statistics","duration","ms","seconds","hours","Math","floor","minutes","msToHM","round","ProgressBar","animated","striped","now","TrackTable","spotifyTrackId","tracksInPlaylist","play","context_uri","uri","uris","updateCallback","removeTracksFromPlaylist","artists","artist","handleRemoveTrackFromPlaylist","handleAddTrackToPlaylist","handlePlayTrackOnSpotify","PlaylistTracklist","currentPage","newPageIndex","currentPageTracks","Pagination","Prev","disabled","changeCurrentPageHandler","Next","Recommendations","recommendedTracks","selectedArtistSeeds","0","1","2","selectedTrackSeeds","targetValence","targetEnergy","targetDanceability","targetBPM","targetPopularity","handleRecommendationGeneration","atLeastOneSeedSelected","updateRecommendations","seedArtistIds","seedIndex","seedTrackIds","query","target_bpm","target_valence","target_energy","target_danceability","target_popularity","seed_artists","seed_tracks","getRecommendations","message","artistSeeds","trackSeeds","event","target","playlistTracks","artistIdArray","Form","Group","controlId","seedNumber","Control","as","onChange","handleAddSeedArtist","numberOfSeedsFull","artistId","trackIdArray","handleAddSeedTrack","trackId","min","max","step","defaultValue","onSubmit","renderSeedTracksDropdown","renderSeedArtistsDropdown","renderAudioFeatureSliders","PlaylistBuilder","selectedPlaylist","href","LikertScaleInput","questionNumber","onInput","updateQuestionChoice","Question","Number","updateQuestionResult","bind","questionCategories","INVOLVEMENT_LEVEL","COPING","PERSONAL_IDENTITY","SOCIAL_IDENTITY","MOOD_ENHANCEMENT","MutualMelodiesPreferenceQuiz","preferenceCode","questions","category","updateQuizQuestionResult","newQuestion","dimensionScores","RC","IR","UC","ER","i","genres","genre","indexOf","highestScoringKey","reduce","prev","highestDimension","some","question","scoredMusicUseCases","getSortedMusicUseAverages","involvementLevelCode","getInvolvementLevelScore","getMusicDimensionScores","genreDataScore","code","scrollTo","top","left","behavior","getElementById","classList","remove","involvementQuestions","involvementAvg","copingQuestions","moodEnhancementQuestions","socialIdentityQuestions","personalIdentityQuestions","copingAvg","moodEnhancementAvg","socialIdentityAvg","personalIdentityAvg","avg","calculateMusicPreferenceCode","App","loggedIn","scrollFunction","checkForLogin","ca","split","c","charAt","substring","getCookie","setSpotifyApi","Container","exact","path","component","React","accessToken","SpotifyWebApi","setAccessToken","setSpotifyApiAction","Boolean","hostname","match","combineReducers","action","ReactDOM","render","store","initialState","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","configureStore","navigator","serviceWorker","ready","registration","unregister"],"mappings":"4jBAQWA,EAAW,mCAEf,SAASC,EAAUC,EAAOC,EAAQC,GACvC,IAAIC,EAAI,IAAIC,KACZD,EAAEE,QAAQF,EAAEG,UAA8B,GAAlBJ,EAAuB,GAAK,KACpD,IAAIK,EAAU,WAAaJ,EAAEK,cAC7BC,SAASC,OAASV,EAAQ,IAAMC,EAAS,IAAMM,EAAU,UAkBpD,SAASI,EAAkBC,GAChC,OAAiB,OAAbA,EACK,KACEA,aAAoBC,OAC7BD,EAASE,SAAQ,SAACC,EAAQC,GACxBJ,EAASI,GAASL,EAAkBI,MAG/BH,GACEA,aAAoBK,QAC7BA,OAAOC,KAAKN,GAAUE,SAAQ,SAACK,GAC7BP,EAASO,GAAOR,EAAkBC,EAASO,OAGtCC,IAAcR,IAEdA,EAYJ,SAASS,IACd,OAAOC,OAAOC,WAAa,I,qBCxBdC,G,wDA7Bb,WAAYC,GAAQ,IAAD,6BACjB,cAAMA,GAENC,IAAS,gBAHQ,E,uGAMKC,G,8EAClBC,EAAQD,EAAKE,a,SAGX9B,EAAU,qBAAsB6B,EAAO,G,OAC7CnB,SAASqB,SAASC,S,iIAIlB,OACE,kBAAC,IAAD,CACEC,WAAW,uBACXC,SAAUnC,EACVoC,YDpBiB,wBCqBjBC,UAAWC,KAAKC,kBAChBC,UAAW,SAACC,GAAD,OAAWC,QAAQC,IAAIF,IAClCG,MD3BN,6JC4BMC,UAAU,uE,GAxBeC,cCLZC,E,uKAEjB,OACE,yBACEC,MAAO,CACLC,OAAO,GAAD,OACJX,KAAKX,MAAMuB,WACPZ,KAAKX,MAAMuB,WAAa,KACxBZ,KAAKX,MAAMwB,OAAS,a,GARAL,aC6BrBM,E,uKAvBX,OACE,yBAAKC,GAAG,qBAAqBR,UAAU,4BACrC,6BACE,wBAAIA,UAAU,4CAAd,yDAGA,uBAAGA,UAAU,kBAAb,yGAIA,uBAAGA,UAAU,uBAAb,+NAMA,kBAAC,EAAD,Y,GAlBcC,a,SCyBTQ,E,kDAzBb,WAAY3B,GAAQ,IAAD,6BACjB,cAAMA,GAENC,IAAS,gBAHQ,E,2DAQjB3B,EAAU,qBAAsB,GAAI,GACpCU,SAASqB,SAASC,W,+BAIlB,OACE,kBAACsB,EAAA,EAAD,CACEC,QAAQ,UACRX,UAAU,qDACVY,QAASnB,KAAKoB,cAHhB,e,GAf4BZ,aCAba,G,gMACE,IAAD,OAClBnC,OAAOoC,iBAAiB,UAAU,WAChC,EAAKC,mB,+BAKP,OACE,6BACE,yBAAKhB,UAAU,iBACXP,KAAKX,MAAMmC,WACX,yBAAKjB,UAAU,mBACb,kBAAC,IAAD,CAAMkB,GAAG,UAAUlB,UAAU,aAC3B,uBACEA,UAAS,8BACPtB,IACI,sBACA,6BAOd,yBAAKsB,UAAU,mBACZtB,IACC,wBAAIsB,UAAU,sBAAd,kBAEA,wBAAIA,UAAU,sBAAd,oBAIFP,KAAKX,MAAMmC,WACX,yBAAKjB,UAAU,mBACb,kBAAC,IAAD,CAAMkB,GAAG,mBAAmBlB,UAAU,aACpC,uBACEA,UAAS,0BACPtB,IACI,sBACA,8BAOhB,yBAAKsB,UAAU,4B,GA/CaC,c,+ECLvBkB,G,OAAsB,SACjCC,EACAC,GAFiC,8CAG9B,WAAMC,GAAN,eAAAC,EAAA,6DACCC,EAAmB,KADpB,SAGGH,EACHI,YAAYL,GACZM,KAFG,uCAGF,WAAM1C,GAAN,iBAAAuC,EAAA,yDACEC,EAAmBxC,EAAK2C,KAEpBC,EAAeJ,EAAiBK,OAAOC,KAE3CN,EAAiBK,OAASL,EAAiBK,OAAOE,OAE9CH,EAPN,iBAQQI,EAAS,IARjB,WAUWJ,EAVX,iCAWYP,EACHY,kBAAkBb,EAAY,CAAEY,WAChCN,MAAK,SAAA1C,GACCA,EAAK2C,KAAKG,OACbF,GAAe,GAGjBI,GAAU,IAEVR,EAAiBK,OAASL,EAAiBK,OAAOK,OAChDlD,EAAK2C,KAAKI,UArBtB,kEAHE,uDA8BF,SAAAnC,GACE4B,EAAmB5B,KAGtB8B,MAAK,WACJ/C,OAAOQ,SAASgD,KAAO,wBAtCxB,OAyCHb,EAAS,CACPc,KAAM,wBACNC,QAASb,IA3CR,2CAH8B,wDCY7Bc,E,kDACJ,WAAYxD,GAAQ,IAAD,6BACjB,cAAMA,GAENC,IAAS,gBAHQ,E,6DAMD,IAAD,EACiCU,KAAKX,MAA/CyD,EADS,EACTA,uBAAwBC,EADf,EACeA,IAE9BD,EAHe,EACoBE,SAEHjC,GAAIgC,K,6CAQpC,OAAOE,IAAKC,KAAK,CACfC,MAAO,oBACPC,KACE,mFACFT,KAAM,UACNU,kBAAkB,EAClBC,kBAAmB,+BACnBC,iBAAkB,SAClBC,gBAAgB,EAChBC,mBAAmB,M,yCAOH,IAAD,EACwBzD,KAAKX,MAAxC2D,EADW,EACXA,SAAUD,EADC,EACDA,IAAKW,EADJ,EACIA,gBAErB1D,KAAK2D,uBAAuB1B,MAAK,SAAC2B,GAC5BA,EAAOC,MACTd,EAAIe,iBAAiBd,EAASjC,IAAIkB,MAAK,WACrCgB,IAAKC,KAAK,CACRP,KAAM,UACNS,KAAK,yBAAD,OAA2BJ,EAASe,KAApC,OAENL,OAEOE,EAAOI,UAAYf,IAAKgB,cAAcC,QAC/CjB,IAAKC,KAAK,CAAEE,KAAM,oC,0CAKH,IAAD,OAClBlE,OAAOoC,iBAAiB,UAAU,WAChC,EAAKC,mB,+BAIC,IACFyB,EAAahD,KAAKX,MAAlB2D,SAEN,OACE,kBAACmB,EAAA,EAAD,CACEC,GAAI,GACJC,GAAI,EACJ9D,UAAWtB,IAA2B,MAAQ,OAE9C,yBAAKsB,UAAU,8CACZyC,EAASsB,OAAO,GACf,kBAACC,EAAA,EAAD,CACEC,IAAKxB,EAASsB,OAAO,GAAGG,IACxBlE,UAAU,+BAGZ,yBAAKA,UAAWtB,IAA2B,OAAS,KAEtD,yBAAKsB,UAAU,kBACb,uBAAGA,UAAU,8BAA8ByC,EAASe,MACpD,uBAAGxD,UAAU,2BAA2ByC,EAAS0B,OAAS,SAAW,WAErE,kBAACzD,EAAA,EAAD,CACEC,QAAQ,UACRX,UAAU,+CACVY,QAASnB,KAAK2E,gBAEd,uBAAGpE,UAAU,kBAEf,kBAACU,EAAA,EAAD,CACEC,QAAQ,iBACRX,UAAU,yCACVY,QAASnB,KAAK8D,kBAEd,uBAAGvD,UAAU,wB,GA5FAC,aA4GZoE,cAAQ,MAPI,SAAC/C,GAC1B,MAAO,CACLiB,uBAAwB,SAACnB,EAAYC,GAAb,OACtBC,EAASH,EAAoBC,EAAYC,QAIhCgD,CAAkC/B,GChH3CgC,E,kDACJ,WAAYxF,GAAQ,IAAD,8BACjB,cAAMA,IAEDyF,MAAQ,CACXC,UAAW,KACX5E,MAAO,MAGTb,IAAS,gBARQ,E,gEAYjBU,KAAKgF,4B,gDAGoB,IAAD,EACFhF,KAAKX,MAArB4F,EADkB,EAClBA,OAAQlC,EADU,EACVA,IAEVkC,EACFjF,KAAKX,MAAM6F,sBAAsBD,EAAQlC,GAEzC/C,KAAKmF,SAAS,CAAEhF,MAAO,sC,+BAIjB,IAAD,OACP,GAAIH,KAAKX,MAAM0F,UAAW,CAAC,IACnBA,EAAc/E,KAAKX,MAAnB0F,UAEN,OACE,6BACE,kBAACK,EAAA,EAAD,CAAK7E,UAAU,YACb,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,IACP,wBAAI7D,UAAU,mBAAd,kBACA,kBAAC,EAAD,CAAQK,WAAY,MAIxB,kBAACwE,EAAA,EAAD,KACGL,EAAUM,KAAI,SAACrC,GACd,OACE,kBAAC,EAAD,CACEA,SAAUA,EACVD,IAAK,EAAK1D,MAAM0D,IAChBW,gBAAiB,EAAKsB,+BAQlC,OAAO,S,GArDmBxE,aAwEjBoE,eAdgB,SAACE,GAC9B,MAAO,CACL/B,IAAK+B,EAAM/B,IAAInB,WACfmD,UAAWD,EAAM9B,SAASsC,sBAII,SAACzD,GACjC,MAAO,CACLqD,sBAAuB,SAACD,EAAQrD,GAAT,OACrBC,EF3BoC,SACxCoD,EACArD,GAFwC,8CAGrC,WAAMC,GAAN,eAAAC,EAAA,6DACCyD,EAAoB,KADrB,SAGG3D,EAAW4D,iBAAiBP,EAAQ,CAAEQ,MAAO,KAAMxD,KAAnD,uCACJ,WAAMyD,GAAN,iBAAA5D,EAAA,yDACEyD,EAAoBG,EAASxD,KAAKI,QAC9BqD,EAAkBD,EAASxD,KAAKG,MAFtC,gBAKQE,EAAS,GALjB,WAOWoD,EAPX,gCAQY/D,EACH4D,iBAAiBP,EAAQ,CAAEQ,MAAO,GAAIlD,WACtCN,MAAK,SAAA2D,GACCA,EAAsB1D,KAAKG,OAC9BsD,GAAkB,GAGpBpD,GAAU,GAEVgD,EAAoBA,EAAkB9C,OACpCmD,EAAsB1D,KAAKI,UAlBvC,6BAwBEiD,EAAoBA,EAAkBM,QAAO,SAAA7C,GAC3C,OAAOA,EAAS8C,MAAM/E,IAAMkE,GAAUjC,EAAS+C,iBAzBnD,4CADI,uDA6BJ,SAAA5F,GACEoF,EAAoBpF,KAjCrB,OAqCH0B,EAAS,CACPc,KAAM,0BACNC,QAAS2C,IAvCR,2CAHqC,sDE2B3BS,CAA2Bf,EAAQrD,QAInCgD,CAA6CC,GC7C7CoB,E,kDA7Bb,WAAY5G,GAAQ,uCACZA,G,qDAMN,GAFkBW,KAAKX,MAAjB6G,QAEO,CAAC,IAAD,EAGPlG,KAAKX,MADP6G,QAAWC,EAFF,EAEEA,YAAaC,EAFf,EAEeA,MAAiCC,GAFhD,EAEsBtF,GAFtB,EAE0BuD,OAF1B,EAEkCgC,aAFlC,EAEgDD,WAG3D,OACE,kBAACjB,EAAA,EAAD,KACE,kBAACjB,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAI9D,UAAU,mCAC7B,wBAAIA,UAAU,yBAAd,aACA,wBAAIA,UAAU,qBAAqB4F,GACnC,uBAAG5F,UAAU,sBAAsB6F,GACnC,uBAAG7F,UAAU,uBAAuB8F,EAAUE,MAA9C,cACA,kBAAC,EAAD,QAKN,OAAO,S,GAzBa/F,a,kBCEpBgG,G,yDAGJ,WAAYnH,GAAQ,IAAD,8BACjB,cAAMA,IAHRoH,YAAa,EAKX,EAAK3B,MAAQ,CACX4B,WAAY,KACZvG,MAAO,MALQ,E,gEAYE,IAAD,OAClBH,KAAKyG,YAAa,EAElBzG,KAAKX,MAAM0D,IAAI4D,gBAAgB,CAAElB,MAAO,EAAGmB,WAAY,eAAgB3E,MACrE,SAAC1C,GAEK,EAAKkH,YACP,EAAKtB,SAAS,CAAE0B,oBAAqBtH,EAAK2C,UAG9C,SAAC/B,GACK,EAAKsG,YACP,EAAKtB,SAAS,CAAEhF,MAAO5B,EAAkB4B,QAK/CH,KAAKX,MAAM0D,IACR4D,gBAAgB,CAAElB,MAAO,EAAGmB,WAAY,gBACxC3E,MACC,SAAC1C,GAEK,EAAKkH,YACP,EAAKtB,SAAS,CAAE2B,qBAAsBvH,EAAK2C,UAG/C,SAAC/B,GACK,EAAKsG,YACP,EAAKtB,SAAS,CAAEhF,MAAO5B,EAAkB4B,QAKjDH,KAAKX,MAAM0D,IAAI4D,gBAAgB,CAAElB,MAAO,EAAGmB,WAAY,cAAe3E,MACpE,SAAC1C,GAEK,EAAKkH,YACP,EAAKtB,SAAS,CAAE4B,mBAAoBxH,EAAK2C,UAG7C,SAAC/B,GACK,EAAKsG,YACP,EAAKtB,SAAS,CAAEhF,MAAO5B,EAAkB4B,QAK/CH,KAAKuB,gB,6CAOLvB,KAAKyG,YAAa,I,+BAIlB,OACE,kBAACrB,EAAA,EAAD,CAAK7E,UAAU,QACb,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,IACP,wBAAI7D,UAAU,mBAAd,kBAGF,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,QACrB,kBAACyG,EAAA,EAAD,CAAMC,iBAAiB,YAAYlG,GAAG,WAAWR,UAAU,YACzD,kBAAC2G,EAAA,EAAD,CAAKC,SAAS,YAAYhE,MAAM,cAC9B,kBAACiC,EAAA,EAAD,CAAK7E,UAAU,QACZP,KAAK8E,MAAM+B,qBACV7G,KAAK8E,MAAM+B,oBAAoBvE,MAAM+C,KAAI,SAAC+B,GACxC,OACE,kBAACjD,EAAA,EAAD,CAAKC,GAAI,EAAGiD,GAAI,EAAG9G,UAAU,eAC3B,yBAAKA,UAAU,wBACb,kBAACgE,EAAA,EAAD,CACEC,IAAK4C,EAAU9C,OAAO,GAAGG,IACzB6C,eAAa,EACbC,OAAK,EACLhH,UAAU,qBAEZ,uBAAGA,UAAU,kBAAkB6G,EAAUrD,aAOvD,kBAACmD,EAAA,EAAD,CAAKC,SAAS,aAAahE,MAAM,eAC/B,kBAACiC,EAAA,EAAD,CAAK7E,UAAU,QACZP,KAAK8E,MAAMgC,sBACV9G,KAAK8E,MAAMgC,qBAAqBxE,MAAM+C,KAAI,SAAC+B,GACzC,OACE,kBAACjD,EAAA,EAAD,CAAKC,GAAI,EAAGC,GAAI,EAAG9D,UAAU,eAC3B,yBAAKA,UAAU,wBACb,kBAACgE,EAAA,EAAD,CACEC,IAAK4C,EAAU9C,OAAO,GAAGG,IACzB6C,eAAa,EACbC,OAAK,EACLhH,UAAU,qBAEZ,uBAAGA,UAAU,kBAAkB6G,EAAUrD,aAOvD,kBAACmD,EAAA,EAAD,CAAKC,SAAS,WAAWhE,MAAM,aAC7B,kBAACiC,EAAA,EAAD,CAAK7E,UAAU,QACZP,KAAK8E,MAAMiC,oBACV/G,KAAK8E,MAAMiC,mBAAmBzE,MAAM+C,KAAI,SAAC+B,GACvC,OACE,kBAACjD,EAAA,EAAD,CAAKC,GAAI,EAAGC,GAAI,EAAG9D,UAAU,eAC3B,yBAAKA,UAAU,wBACb,kBAACgE,EAAA,EAAD,CACEC,IAAK4C,EAAU9C,OAAO,GAAGG,IACzB6C,eAAa,EACbC,OAAK,EACLhH,UAAU,qBAEZ,uBAAGA,UAAU,kBAAkB6G,EAAUrD,oB,GAtI1CvD,cA0JVoE,eANO,SAACE,GACrB,MAAO,CACL/B,IAAK+B,EAAM/B,IAAInB,cAIJgD,CAAyB4B,GC3JlCgB,E,kDAGJ,WAAYnI,GAAQ,IAAD,8BACjB,cAAMA,IAHRoH,YAAa,EAKX,EAAK3B,MAAQ,CACX2C,UAAW,KACXtH,MAAO,MALQ,E,gEASE,IAAD,OAClBH,KAAKyG,YAAa,EAElBzG,KAAKX,MAAM0D,IAAI2E,eAAe,CAAEjC,MAAO,GAAImB,WAAY,eAAgB3E,MACrE,SAAA1C,GACM,EAAKkH,YACP,EAAKtB,SAAS,CAAEwC,mBAAoBpI,EAAK2C,UAG7C,SAAA/B,GACM,EAAKsG,YACP,EAAKtB,SAAS,CAAEhF,MAAO5B,EAAkB4B,QAK/CH,KAAKX,MAAM0D,IAAI2E,eAAe,CAAEjC,MAAO,GAAImB,WAAY,gBAAiB3E,MACtE,SAAA1C,GACM,EAAKkH,YACP,EAAKtB,SAAS,CAAEyC,oBAAqBrI,EAAK2C,UAG9C,SAAA/B,GACM,EAAKsG,YACP,EAAKtB,SAAS,CAAEhF,MAAO5B,EAAkB4B,QAK/CH,KAAKX,MAAM0D,IAAI2E,eAAe,CAAEjC,MAAO,GAAImB,WAAY,cAAe3E,MACpE,SAAA1C,GACM,EAAKkH,YACP,EAAKtB,SAAS,CAAE0C,kBAAmBtI,EAAK2C,UAG5C,SAAA/B,GACM,EAAKsG,YACP,EAAKtB,SAAS,CAAEhF,MAAO5B,EAAkB4B,QAK/CH,KAAKuB,gB,6CAOLvB,KAAKyG,YAAa,I,+BAIlB,OACE,kBAACrB,EAAA,EAAD,CAAK7E,UAAU,OACb,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,IACP,wBAAI7D,UAAU,mBAAd,iBAGF,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,QACrB,kBAACyG,EAAA,EAAD,CAAMC,iBAAiB,YAAYlG,GAAG,WAAWR,UAAU,YACzD,kBAAC2G,EAAA,EAAD,CAAKC,SAAS,YAAYhE,MAAM,cAC9B,kBAACiC,EAAA,EAAD,CAAK7E,UAAU,QACZP,KAAK8E,MAAM6C,oBACV3H,KAAK8E,MAAM6C,mBAAmBrF,MAAM+C,KAAI,SAAAyC,GACtC,OACE,kBAAC3D,EAAA,EAAD,CAAKC,GAAI,EAAGC,GAAI,EAAG9D,UAAU,eAC3B,yBAAKA,UAAU,wBACb,kBAACgE,EAAA,EAAD,CACEC,IAAKsD,EAASC,MAAMzD,OAAO,GAAGG,IAC9B8C,OAAK,EACLhH,UAAU,qBAEZ,uBAAGA,UAAU,kBAAkBuH,EAAS/D,aAOtD,kBAACmD,EAAA,EAAD,CAAKC,SAAS,aAAahE,MAAM,eAC/B,kBAACiC,EAAA,EAAD,CAAK7E,UAAU,QACZP,KAAK8E,MAAM8C,qBACV5H,KAAK8E,MAAM8C,oBAAoBtF,MAAM+C,KAAI,SAAAyC,GACvC,OACE,kBAAC3D,EAAA,EAAD,CAAKC,GAAI,EAAGC,GAAI,EAAG9D,UAAU,eAC3B,yBAAKA,UAAU,wBACb,kBAACgE,EAAA,EAAD,CACEC,IAAKsD,EAASC,MAAMzD,OAAO,GAAGG,IAC9B8C,OAAK,EACLhH,UAAU,qBAEZ,uBAAGA,UAAU,kBAAkBuH,EAAS/D,aAOtD,kBAACmD,EAAA,EAAD,CAAKC,SAAS,WAAWhE,MAAM,aAC7B,kBAACiC,EAAA,EAAD,CAAK7E,UAAU,QACZP,KAAK8E,MAAM+C,mBACV7H,KAAK8E,MAAM+C,kBAAkBvF,MAAM+C,KAAI,SAAAyC,GACrC,OACE,kBAAC3D,EAAA,EAAD,CAAKC,GAAI,EAAGC,GAAI,EAAG9D,UAAU,eAC3B,yBAAKA,UAAU,wBACb,kBAACgE,EAAA,EAAD,CACEC,IAAKsD,EAASC,MAAMzD,OAAO,GAAGG,IAC9B8C,OAAK,EACLhH,UAAU,qBAEZ,uBAAGA,UAAU,kBAAkBuH,EAAS/D,oB,GA3H1CvD,aAgJToE,eANO,SAAAE,GACpB,MAAO,CACL/B,IAAK+B,EAAM/B,IAAInB,cAIJgD,CAAyB4C,GC5IlCQ,E,kDACJ,WAAY3I,GAAQ,IAAD,8BACjB,cAAMA,IAEDyF,MAAQ,CACXoB,QAAS,KACT/F,MAAO,MALQ,E,gEASE,IAAD,OAClBH,KAAKX,MAAM0D,IAAInB,WAAWqG,QAAQhG,MAChC,SAAA1C,GACE,EAAK4F,SAAS,CAAEe,QAAS3H,EAAkBgB,EAAK2C,WAElD,SAAA/B,GACE,EAAKgF,SAAS,CAAEhF,MAAO5B,EAAkB4B,QAI7CH,KAAKuB,gB,+BAGG,IACF2E,EAAYlG,KAAK8E,MAAjBoB,QAEN,OAAIA,EAEA,yBAAK3F,UAAU,mBACb,kBAAC,EAAD,CAAa2F,QAASA,IACtB,kBAAC,EAAD,CAAQtF,WAAY,IACpB,kBAAC,EAAD,MACA,kBAAC,EAAD,CAAQA,WAAY,IACpB,kBAAC,EAAD,MACA,kBAAC,EAAD,CAAQA,WAAY,IACpB,kBAAC,EAAD,CAAQA,WAAY,IACpB,kBAAC,EAAD,CAAmBqE,OAAQiB,EAAQnF,MAIhC,S,GAxCSP,aAmDPoE,gBANO,SAAAE,GACpB,MAAO,CACL/B,IAAK+B,EAAM/B,OAIA6B,CAAyBoD,GCpDnBE,I,wLACE,IAAD,OAClBhJ,OAAOoC,iBAAiB,UAAU,WAChC,EAAKC,iBAGPjC,IAASU,Q,+BAGD,IACFgD,EAAahD,KAAKX,MAAlB2D,SAEN,OACE,yBAAKjC,GAAG,wBAAwBR,UAAU,OACxC,kBAAC6E,EAAA,EAAD,KACE,kBAACjB,EAAA,EAAD,CAAK5D,UAAU,yBAAyB6D,GAAI,GAAI+D,GAAI,GACjDnF,EAASsB,OAAO,GACf,kBAACC,EAAA,EAAD,CACEC,IAAKxB,EAASsB,OAAO,GAAGG,IACxBlE,UAAU,wBAEV,MAEN,kBAAC4D,EAAA,EAAD,CACE5D,UAAU,mDACV6D,GAAI,GACJ+D,GAAI,GAEJ,wBAAI5H,UAAU,qBACXyC,EAASe,MAEZ,uBAAGxD,UAAU,uBAAuByC,EAASoF,aAAe,4BAC5D,uBAAG7H,UAAU,kBACVyC,EAASqD,UAAUE,MAAO,IACE,GAA5BvD,EAASqD,UAAUE,MAAa,WAAa,kB,iMAShCvG,KAAKX,MAAvB0D,E,EAAAA,IAAKC,E,EAAAA,SAEPqF,EAAW,GAEfrF,EAASZ,OAAO1D,SAAQ,SAAC4J,GACvBD,EAASE,KAAKD,EAAcE,MAAMzH,OAGhC0H,EAAaJ,EAASK,OAAS,IAC/BC,EAAkB,GAEE,IAApBN,EAASK,O,iCACL3F,EACH6F,0BAA0BP,EAASQ,OAAO,EAAG,MAC7C5G,MAAK,SAAC1C,GACL,IAAImG,EAAWnH,EAAkBgB,EAAK2C,MAElCwD,EAASoD,cAEbH,EAAkBA,EAAgBlG,OAAOiD,EAASoD,kB,WAGlDL,E,iBACEM,EAA0B,I,YAEvBN,E,kCACC1F,EACH6F,0BAA0BP,EAASQ,OAAO,EAAG,MAC7C5G,MAAK,SAAC1C,GACL,IAAImG,EAAWnH,EAAkBgB,EAAK2C,MACtCyG,EAAkBA,EAAgBlG,OAAOiD,EAASoD,eAClDC,GAA2BrD,EAASoD,cAAcJ,U,QAGlDK,IAA4BV,EAASK,SACvCD,GAAa,G,+BAKfO,EAAaL,EAAgBtD,KAAI,SAAC4D,GAAoB,IAEtDC,EAMED,EANFC,aACAC,EAKEF,EALFE,OACAC,EAIEH,EAJFG,QACAC,EAGEJ,EAHFI,MACAC,EAEEL,EAFFK,WAGF,MAAO,CACLC,SAAU,iBAFRN,EADFlI,GAIAyI,MAAON,EAAeC,EAASC,EAAUC,EAAQC,MAMjDG,EAAmBT,EAAWU,MAAK,SAAC5H,EAAG6H,GAAJ,OAAU7H,EAAE0H,MAAQG,EAAEH,SAEzDI,EAAkB,GAClBC,EAAmB,GAEvBJ,EAAiB/K,SAAQ,SAAC8K,EAAO5K,GAC3BA,EAAQ,GAAK,EACfgL,EAAgBrB,KAAKiB,GAErBK,EAAiBtB,KAAKiB,MAK1BK,EAAiBC,UAEbC,EAAeH,EAAgBnH,OAAOoH,GACtC5E,EAAS,G,UACPlC,EAAIkF,QAAQhG,MAAK,SAACyD,GACtBT,EAASS,EAASxD,KAAKnB,M,eAGrBY,EAAa,G,UACXoB,EACHiH,eAAe/E,EAAQjC,EAASe,KAAO,iBACvC9B,MAAK,SAACyD,GACL/D,EAAa+D,EAASxD,KAAKnB,M,yBAGzBgC,EAAIkH,oBACRtI,EACAoI,EAAa1E,KAAI,SAACmE,GAAD,OAAWA,EAAMD,a,4GAnIA/I,c,UCsL3B0J,G,kDAtLb,WAAY7K,GAAQ,IAAD,8BACjB,cAAMA,IAEDyF,MAAQ,CACXuE,MAAO,EACPc,SAAU,EACVjB,aAAc,EACdE,QAAS,EACTD,OAAQ,EACRiB,WAAY,EACZd,WAAY,GAVG,E,gEAcE,IAAD,OAClBtJ,KAAKqK,6BAELnL,OAAOoC,iBAAiB,UAAU,WAChC,EAAKC,mB,sLAKevB,KAAKX,MAArB0D,E,EAAAA,IAAKX,E,EAAAA,OAEPkI,EAAa,CACfjB,MAAO,KACPH,aAAc,KACdE,QAAS,KACTD,OAAQ,KACRiB,WAAY,KACZd,WAAY,MAGVjB,EAAW,GAEfjG,EAAO1D,SAAQ,SAAA4J,GACbD,EAASE,KAAKD,EAAcE,MAAMzH,IAClCuJ,EAAWhB,WACTgB,EAAWhB,WAAahB,EAAcE,MAAMc,cAG5Cb,EAAaJ,EAASK,OAAS,IAE/BC,EAAkB,GAEE,IAApBN,EAASK,O,iCACL3F,EACH6F,0BAA0BP,EAASQ,OAAO,EAAG,MAC7C5G,MAAK,SAAA1C,GACJ,IAAImG,EAAWnH,EAAkBgB,EAAK2C,MAElCwD,EAASoD,gBACXH,EAAkBA,EAAgBlG,OAAOiD,EAASoD,mB,WAIpDL,E,iBACEM,EAA0B,I,YAEvBN,E,kCACC1F,EACH6F,0BAA0BP,EAASQ,OAAO,EAAG,MAC7C5G,MAAK,SAAA1C,GACJ,IAAImG,EAAWnH,EAAkBgB,EAAK2C,MACtCyG,EAAkBA,EAAgBlG,OAAOiD,EAASoD,eAClDC,GAA2BrD,EAASoD,cAAcJ,U,QAGlDK,IAA4B3G,EAAOsG,SACrCD,GAAa,G,wBAKnBE,EAAgBjK,SAAQ,SAAAuK,GACC,OAAnBA,IACFqB,EAAWjB,MAAQiB,EAAWjB,MAAQJ,EAAeI,MACrDiB,EAAWpB,aACToB,EAAWpB,aAAeD,EAAeC,aAC3CoB,EAAWlB,QAAUkB,EAAWlB,QAAUH,EAAeG,QACzDkB,EAAWnB,OAASmB,EAAWnB,OAASF,EAAeE,OACvDmB,EAAWF,WACTE,EAAWF,WAAanB,EAAemB,eAI7CpK,KAAKmF,SAAS,CACZkE,MAAOiB,EAAWjB,MAAQjH,EAAOsG,OACjCQ,aAAcoB,EAAWpB,aAAe9G,EAAOsG,OAC/CU,QAASkB,EAAWlB,QAAUhH,EAAOsG,OACrCS,OAAQmB,EAAWnB,OAAS/G,EAAOsG,OACnC0B,WAAYE,EAAWF,WACvBd,WAAYgB,EAAWhB,WAAalH,EAAOsG,S,sIAKvC,IAAD,EAQH1I,KAAK8E,MANPuE,EAFK,EAELA,MACAH,EAHK,EAGLA,aACAE,EAJK,EAILA,QACAD,EALK,EAKLA,OACAiB,EANK,EAMLA,WACAd,EAPK,EAOLA,WAGF,KAAMD,GAASH,GAAgBE,GAAWD,GAAUiB,GAClD,OACE,yBAAK7J,UAAU,YACb,kBAAC6E,EAAA,EAAD,CAAK7E,UAAU,8BACb,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,wBAAvB,6DAQR,IAAIgK,Ed7DD,SAAgBC,GACrB,IAAIC,EAAUD,EAAK,IAEfE,EAAQC,KAAKC,MAAMH,EAAU,MAKjC,OAJAA,GAAoB,KAIb,CACLC,QACAG,QAJYF,KAAKC,MAAMH,EAAU,KcuDlBK,CAAOH,KAAKI,MAAMX,IAEjC,OACE,yBAAK7J,UAAU,YACb,kBAAC6E,EAAA,EAAD,CAAK7E,UAAU,8BACb,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,EAAG+D,GAAI,EAAG5H,UAAU,wBAC3B,uBACEA,UAAU,kBADZ,WAKA,kBAACyK,GAAA,EAAD,CAAaC,UAAQ,EAACC,SAAO,EAACC,IAAc,IAAThC,KAErC,kBAAChF,EAAA,EAAD,CAAKC,GAAI,EAAG+D,GAAI,EAAG5H,UAAU,wBAC3B,uBACEA,UAAU,kBADZ,iBAKA,kBAACyK,GAAA,EAAD,CAAaC,UAAQ,EAACC,SAAO,EAACC,IAAoB,IAAfjC,KAErC,kBAAC/E,EAAA,EAAD,CAAKC,GAAI,EAAG+D,GAAI,EAAG5H,UAAU,wBAC3B,uBACEA,UAAU,kBADZ,YAKA,kBAACyK,GAAA,EAAD,CAAaC,UAAQ,EAACC,SAAO,EAACC,IAAe,IAAV/B,MAGvC,kBAAChE,EAAA,EAAD,CAAK7E,UAAU,8BACb,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,EAAG+D,GAAI,EAAG5H,UAAU,wBAC3B,uBACEA,UAAU,kBADZ,UAGS,6BACNoK,KAAKI,MAAM1B,GAJd,QAOF,kBAAClF,EAAA,EAAD,CAAKC,GAAI,EAAG+D,GAAI,EAAG5H,UAAU,wBAC3B,uBACEA,UAAU,kBADZ,aAGY,6BACTgK,EAASG,MAAQ,EAAIH,EAASG,MAAQ,MAAQ,GAAI,IAClDH,EAASM,QAAU,EAAIN,EAASM,QAAU,OAAS,KAGxD,kBAAC1G,EAAA,EAAD,CAAKC,GAAI,EAAG+D,GAAI,EAAG5H,UAAU,wBAC3B,uBACEA,UAAU,kBADZ,eAGc,6BACXoK,KAAKI,MAAMzB,W,GA9KY9I,aCDhC4K,G,kDACJ,WAAY/L,GAAQ,IAAD,6BACjB,cAAMA,GAENC,IAAS,gBAHQ,E,qEAUM+L,GAAiB,IAAD,OACvC,OAAO,WAAO,IAAD,EACiC,EAAKhM,MAA3C0D,EADK,EACLA,IAAKpB,EADA,EACAA,WADA,EACY2J,iBAGrBvI,EACGwI,KAAK,CACJC,YAAY,oBAAD,OAAsB7J,GACjCY,OAAQ,CAAEkJ,IAAI,iBAAD,OAAmBJ,MAEjCpJ,MACC,SAACyD,OAGD,SAACvF,GAECC,QAAQD,MAAMA,MAIpB4C,EACGwI,KAAK,CACJG,KAAM,CAAC,iBAAD,OAAkBL,MAEzBpJ,MACC,SAACyD,OAGD,SAACvF,GAECC,QAAQD,MAAMA,S,+CAWDkL,GAAiB,IAAD,OACvC,OAAO,WAAO,IAAD,EACe,EAAKhM,MAAzBsC,EADK,EACLA,WAAYoB,EADP,EACOA,IAElBA,EACGkH,oBAAoBtI,EAAY,CAAC,iBAAD,OAAkB0J,KAClDpJ,KAFH,+BAAAH,EAAA,MAGI,WAAO4D,GAAP,SAAA5D,EAAA,sEAGQJ,EAAoBC,EAAYoB,GAHxC,OAIM,EAAK1D,MAAMsM,gBACb,EAAKtM,MAAMsM,iBALf,2CAHJ,uDAWI,SAACxL,GAECC,QAAQD,MAAMA,S,oDAUMkL,GAAiB,IAAD,OAC5C,OAAO,WAAO,IAAD,EACoC,EAAKhM,MAA9CsC,EADK,EACLA,WAAYoB,EADP,EACOA,IAAKrB,EADZ,EACYA,oBAEvBqB,EACG6I,yBAAyBjK,EAAY,CACpC,CAAE8J,IAAI,iBAAD,OAAmBJ,MAEzBpJ,KAJH,+BAAAH,EAAA,MAKI,WAAO4D,GAAP,SAAA5D,EAAA,sEAGQJ,EAAoBC,EAAYoB,GAHxC,OAKM,EAAK1D,MAAMsM,gBACb,EAAKtM,MAAMsM,iBANf,2CALJ,uDAcI,SAACxL,GAECC,QAAQD,MAAMA,S,+BAMd,IAAD,OACP,OACI,6BACGH,KAAKX,MAAM+C,OAAOiD,KAAI,SAACmD,GACtB,OACE,yBAAKjI,UAAU,2CACb,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,uBACZiI,EAAMT,MAAMzD,OAAO,IAClB,kBAACC,EAAA,EAAD,CACEC,IAAKgE,EAAMT,MAAMzD,OAAO,GAAGG,IAC3BlE,UAAU,0BAGd,yBAAKA,UAAU,8BACb,uBAAGA,UAAU,+BAA+BiI,EAAMzE,MAClD,uBAAGxD,UAAU,yBACViI,EAAMqD,QAAQxG,KAAI,SAACyG,EAAQlN,GAC1B,OAAOA,IAAU4J,EAAMqD,QAAQnD,OAAS,EACpCoD,EAAO/H,KACP+H,EAAO/H,KAAO,YAM5B,yBAAKxD,UAAU,8DACZ,EAAKlB,MAAMiM,iBACV,kBAACrK,EAAA,EAAD,CACEE,QAAS,EAAK4K,8BAA8BvD,EAAMzH,IAClDR,UAAU,wDACVW,QAAQ,UAER,uBAAGX,UAAU,iBAGf,kBAACU,EAAA,EAAD,CACEE,QAAS,EAAK6K,yBAAyBxD,EAAMzH,IAC7CR,UAAU,0DAEZ,uBAAGA,UAAU,gBAGf,kBAACU,EAAA,EAAD,CACEV,UAAU,yDACVY,QAAS,EAAK8K,yBAAyBzD,EAAMzH,KAE7C,uBAAGR,UAAU,0B,GAxJRC,aAgLVoE,gBAbS,SAACE,GACvB,MAAO,CACL/B,IAAK+B,EAAM/B,IAAInB,eAIQ,SAACC,GAC1B,MAAO,CACLH,oBAAqB,SAACC,EAAYC,GAAb,OACnBC,EAASH,EAAoBC,EAAYC,QAIhCgD,CAA6CwG,I,UC9G7Cc,G,kDAlEb,WAAY7M,GAAQ,IAAD,8BACjB,cAAMA,IAEDyF,MAAQ,CACXqH,YAAa,GAGf7M,IAAS,gBAPQ,E,qEAeM8M,GAAe,IAAD,OACrC,OAAO,WACL,EAAKjH,SAAS,CAAEgH,YAAaC,O,+BAIvB,IACFD,EAAgBnM,KAAK8E,MAArBqH,YACA/J,EAAWpC,KAAKX,MAAhB+C,OAIFiK,EADajK,EAAOK,OAAO,IACIoG,OAAqB,EAAdsD,EAAiB,GAO3D,OAJAE,EAAoBA,EAAkBhH,KACpC,SAAAiD,GAAa,OAAIA,EAAcE,SAI/B,6BACE,6BACE,wBAAIjI,UAAU,mBAAd,gBACA,8BAEF,kBAAC,GAAD,CACE6B,OAAQiK,EACRf,kBAAkB,EAClB3J,WAAY3B,KAAKX,MAAMsC,aAEzB,yBAAKpB,UAAU,iCACb,kBAAC+L,GAAA,EAAD,KACE,kBAACA,GAAA,EAAWC,KAAZ,CACEC,SAA0B,IAAhBL,EACVhL,QAASnB,KAAKyM,yBACZzM,KAAK8E,MAAMqH,YAAc,KAG7B,kBAACG,GAAA,EAAWI,KAAZ,CACEF,SAA8B,GAAnBL,EAAc,IAAU/J,EAAOsG,OAC1CvH,QAASnB,KAAKyM,yBACZzM,KAAK8E,MAAMqH,YAAc,Y,GAzDT3L,a,qCCE1BmM,G,kDACJ,WAAYtN,GAAQ,IAAD,8BACjB,cAAMA,IAEDyF,MAAQ,CACX8H,kBAAmB,GACnBC,oBAAqB,CACnBC,EAAG,GACHC,EAAG,GACHC,EAAG,IAELC,mBAAoB,CAClBH,EAAG,GACHC,EAAG,GACHC,EAAG,IAELE,cAAe,GACfC,aAAc,GACdC,mBAAoB,GACpBC,UAAW,IACXC,iBAAkB,GAClBnN,MAAO,MAGTb,IAAS,gBAETJ,OAAOoC,iBAAiB,UAAU,WAChC,EAAKC,iBA1BU,E,gEA+BjBvB,KAAKuN,mC,+CAMmB,IAAD,EACwBvN,KAAKX,MAA9C0D,EADiB,EACjBA,IAAKpB,EADY,EACZA,YACXD,EAFuB,EACAA,qBACHC,EAAYoB,K,uDAUA,IAAD,EACmB/C,KAAK8E,MAAjD+H,EADyB,EACzBA,oBAAqBI,EADI,EACJA,mBAEvBO,GAAyB,EAE7B3O,OAAOC,KAAK+N,GAAqBnO,SAAQ,SAACE,GACL,KAA/BiO,EAAoBjO,KACtB4O,GAAyB,MAIxBA,GACH3O,OAAOC,KAAKmO,GAAoBvO,SAAQ,SAACE,GACL,KAA9BqO,EAAmBrO,KACrB4O,GAAyB,MAK3BA,EACFxN,KAAKyN,wBAELzN,KAAKmF,SAAS,CACZhF,MAAO,6D,8CAWY,IAAD,OAChB4C,EAAQ/C,KAAKX,MAAb0D,IADgB,EAUlB/C,KAAK8E,MAPP+H,EAHoB,EAGpBA,oBACAI,EAJoB,EAIpBA,mBACAC,EALoB,EAKpBA,cACAC,EANoB,EAMpBA,aACAC,EAPoB,EAOpBA,mBACAC,EARoB,EAQpBA,UACAC,EAToB,EASpBA,iBAGEI,EAAgB,GACpB7O,OAAOC,KAAK+N,GAAqBnO,SAAQ,SAACiP,GACD,KAAnCd,EAAoBc,IACtBD,EAAcnF,KAAKsE,EAAoBc,OAI3C,IAAIC,EAAe,GACnB/O,OAAOC,KAAKmO,GAAoBvO,SAAQ,SAACiP,GACD,KAAlCV,EAAmBU,IACrBC,EAAarF,KAAK0E,EAAmBU,OAIzC,IAAIE,EAAQ,CACVpI,MAAO,GACPqI,WAAYT,EACZU,eAAgBb,EAChBc,cAAeb,EACfc,oBAAqBb,EACrBc,kBAAmBZ,EACnBa,aAAcT,EACdU,YAAaR,GAGf7K,EAAIsL,mBAAmBR,GAAO5L,MAC5B,SAAC1C,GACC,EAAK4F,SAAS,CAAEyH,kBAAmBrN,EAAK2C,KAAKE,OAAQjC,MAAO,UAE9D,SAACA,GACC,EAAKgF,SAAS,CAAEhF,MAAOA,EAAMmO,e,0CAWd,IAAD,EACgCtO,KAAK8E,MAAjD+H,EADY,EACZA,oBAAqBI,EADT,EACSA,mBAEvBsB,EAAc,GACdC,EAAa,GAYjB,MAVA,CAAC,EAAG,EAAG,GAAG9P,SAAQ,SAACiP,GACsB,KAAnCd,EAAoBc,IACtBY,EAAYhG,KAAKsE,EAAoBc,IAGD,KAAlCV,EAAmBU,IACrBa,EAAWjG,KAAK0E,EAAmBU,OAIhCY,EAAY7F,OAAS8F,EAAW9F,QAAU,I,0CAS/B9J,GAAQ,IAAD,OACzB,OAAO,SAAC6P,GACN,EAAKtJ,SAAS,CACZ0H,oBAAoB,6BACf,EAAK/H,MAAM+H,qBADG,mBAEhBjO,EAAQ6P,EAAMC,OAAO7K,a,kDAWD,IAAD,OACpB8K,EAAmB3O,KAAKX,MAAxBsP,eAEF9C,EAAU,GAEd8C,EAAejQ,SAAQ,SAAC4J,GACtBA,EAAcE,MAAMqD,QAAQnN,SAAQ,SAACoN,GACnCD,EAAQC,EAAO/K,IAAM+K,EAAO/H,WAIhC,IAAI6K,EAAgB/P,OAAOC,KAAK+M,GAEhC,OACE,kBAACgD,GAAA,EAAKC,MAAN,CAAYC,UAAU,eACpB,kBAAC3J,EAAA,EAAD,CAAK7E,UAAU,SACb,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,aACrB,uBAAGA,UAAU,yBAAb,oBAGD,CAAC,EAAG,EAAG,GAAG8E,KAAI,SAAC2J,GAAgB,IACxBnC,EAAwB,EAAK/H,MAA7B+H,oBAEN,OACE,kBAAC1I,EAAA,EAAD,CAAKgE,GAAI,GAAI9D,GAAI,GACf,kBAACwK,GAAA,EAAKI,QAAN,CACElQ,IAAKiQ,EAAa,EAClBE,GAAG,SACHC,SAAU,EAAKC,oBAAoBJ,EAAa,GAChDxC,SAC0C,KAAxCK,EAAoBmC,EAAa,IACjC,EAAKK,qBAGP,4BAAQxL,MAAM,IAAd,QACC+K,EAAcvJ,KAAI,SAACiK,GAClB,OACE,4BAAQzL,MAAOyL,GAAWzD,EAAQyD,gB,yCAkBnC1Q,GAAQ,IAAD,OACxB,OAAO,SAAC6P,GACN,EAAKtJ,SAAS,CACZ8H,mBAAmB,6BACd,EAAKnI,MAAMmI,oBADE,mBAEfrO,EAAQ6P,EAAMC,OAAO7K,a,iDAWF,IAAD,OACnB8K,EAAmB3O,KAAKX,MAAxBsP,eAEFvM,EAAS,GAEbuM,EAAejQ,SAAQ,SAAC4J,GACtB,IAAIE,EAAQF,EAAcE,MAE1BpG,EAAOoG,EAAMzH,IAAMyH,EAAMzE,QAG3B,IAAIwL,EAAe1Q,OAAOC,KAAKsD,GAE/B,OACE,kBAACyM,GAAA,EAAKC,MAAN,CAAYC,UAAU,cACpB,kBAAC3J,EAAA,EAAD,CAAK7E,UAAU,SACb,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,aACrB,uBAAGA,UAAU,yBAAb,mBAGD,CAAC,EAAG,EAAG,GAAG8E,KAAI,SAAC2J,GAAgB,IACxB/B,EAAuB,EAAKnI,MAA5BmI,mBAEN,OACE,kBAAC9I,EAAA,EAAD,CAAKgE,GAAI,GAAI9D,GAAI,GACf,kBAACwK,GAAA,EAAKI,QAAN,CACElQ,IAAKiQ,EAAa,EAClBE,GAAG,SACHC,SAAU,EAAKK,mBAAmBR,EAAa,GAC/CxC,SACyC,KAAvCS,EAAmB+B,EAAa,IAChC,EAAKK,qBAGP,4BAAQxL,MAAM,IAAd,QACC0L,EAAalK,KAAI,SAACoK,GACjB,OAAO,4BAAQ5L,MAAO4L,GAAUrN,EAAOqN,gB,kDAiB5B,IAAD,OAC1B,OACE,kBAACrK,EAAA,EAAD,CAAK7E,UAAU,SACb,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,aACrB,uBAAGA,UAAU,yBAAb,sBAGF,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,0CACrB,uBAAGA,UAAU,4BAAb,kBACA,kBAAC,KAAD,CACEmP,IAAK,EACLC,IAAK,IACLC,KAAM,EACNC,aAAc,GACdhM,MAAuC,IAAhC7D,KAAK8E,MAAMsI,mBAClB+B,SAAU,SAACtL,GAAD,OACR,EAAKsB,SAAS,CAAEiI,mBAAoBvJ,EAAQ,OAE9CtD,UAAU,UAGd,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,0CACrB,uBAAGA,UAAU,4BAAb,YACA,kBAAC,KAAD,CACEmP,IAAK,EACLC,IAAK,IACLC,KAAM,EACNC,aAAc,GACdhM,MAAiC,IAA1B7D,KAAK8E,MAAMqI,aAClBgC,SAAU,SAACtL,GAAD,OAAW,EAAKsB,SAAS,CAAEgI,aAActJ,EAAQ,OAC3DtD,UAAU,UAId,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,0CACrB,uBAAGA,UAAU,4BAAb,aACA,kBAAC,KAAD,CACEmP,IAAK,EACLC,IAAK,IACLC,KAAM,EACNC,aAAc,GACdhM,MAAkC,IAA3B7D,KAAK8E,MAAMoI,cAClBiC,SAAU,SAACtL,GAAD,OAAW,EAAKsB,SAAS,CAAE+H,cAAerJ,EAAQ,OAC5DtD,UAAU,UAId,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,0CACrB,uBAAGA,UAAU,4BAAb,WACA,kBAAC,KAAD,CACEmP,IAAK,EACLC,IAAK,IACLC,KAAM,EACNC,aAAc,IACdhM,MAAO7D,KAAK8E,MAAMuI,UAClB8B,SAAU,SAACtL,GAAD,OAAW,EAAKsB,SAAS,CAAEkI,UAAWxJ,KAChDtD,UAAU,UAId,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,0CACrB,uBAAGA,UAAU,4BAAb,gBACA,kBAAC,KAAD,CAEEmP,IAAK,EACLC,IAAK,IACLC,KAAM,EACNC,aAAc,IACdhM,MAAO7D,KAAK8E,MAAMwI,iBAClB6B,SAAU,SAACtL,GAAD,OAAW,EAAKsB,SAAS,CAAEmI,iBAAkBzJ,KACvDtD,UAAU,a,+BAOV,IACFJ,EAAUH,KAAK8E,MAAf3E,MAEN,OACE,6BACE,yBAAKI,UAAU,mBACb,wBAAIA,UAAU,mBAAd,8BACA,8BAEF,kBAACsO,GAAA,EAAD,CAAMiB,SAAU,SAACvQ,GAAD,OAAUa,QAAQC,IAAId,KACnCS,KAAK+P,2BACL/P,KAAKgQ,4BACLhQ,KAAKiQ,6BAER,yBAAK1P,UAAU,oBACb,kBAACU,EAAA,EAAD,CACEV,UAAU,qDACVY,QAASnB,KAAKuN,gCAFhB,oBAQF,6BACCpN,GACC,yBAAKI,UAAU,oBACb,wBAAIA,UAAU,wBACZ,uBAAGA,UAAU,+BADf,IACkDJ,KAIpDA,GACA,yBAAKI,UAAU,QACb,kBAAC,GAAD,CACEoB,WAAY3B,KAAKX,MAAMsC,WACvBS,OAAQpC,KAAK8E,MAAM8H,kBACnBjB,eAAgB3L,KAAK8C,+B,GA/ZLtC,aA2bfoE,gBAbS,SAACE,GACvB,MAAO,CACL/B,IAAK+B,EAAM/B,IAAInB,eAIQ,SAACC,GAC1B,MAAO,CACLH,oBAAqB,SAACC,EAAYC,GAAb,OACnBC,EAASH,EAAoBC,EAAYC,QAIhCgD,CAA6C+H,ICxbtDuD,G,uKACM,IAAD,EACyBlQ,KAAKX,MAA/B8Q,EADC,EACDA,iBAAkBpN,EADjB,EACiBA,IAExB,OAAKoN,EAmBH,yBAAKpP,GAAG,2BAA2BR,UAAU,OAC3C,kBAAC,GAAD,CAAcyC,SAAUmN,EAAkBpN,IAAKA,IAC/C,kBAAC,EAAD,CAAQnC,WAAY,IACpB,kBAAC,GAAD,CAAyBwB,OAAQ+N,EAAiB/N,OAAQW,IAAKA,IAC/D,kBAAC,EAAD,CAAQnC,WAAY,IACpB,kBAAC,GAAD,CACEwB,OAAQ+N,EAAiB/N,OACzBT,WAAYwO,EAAiBpP,KAE/B,kBAAC,EAAD,CAAQH,WAAY,IACpB,kBAAC,GAAD,CACE+N,eAAgBwB,EAAiB/N,OACjCT,WAAYwO,EAAiBpP,MA7B/B,yBAAKA,GAAG,2BAA2BR,UAAU,OAC3C,kBAAC4D,EAAA,EAAD,CAAKC,GAAI,IACP,kBAAC,EAAD,CAAQxD,WAAY,IACpB,yBAAKL,UAAU,oCACb,wBAAIA,UAAU,qBAAd,6BACA,uBAAGA,UAAU,uBAAb,SACS,IACP,uBAAG6P,KAAK,aAAR,uCAFF,6B,GAXgB5P,aAiDfoE,gBAPS,SAAAE,GACtB,MAAO,CACL/B,IAAK+B,EAAM/B,IAAM+B,EAAM/B,IAAInB,WAAa,KACxCuO,iBAAkBrL,EAAM9B,SAAW8B,EAAM9B,SAASmN,iBAAmB,QAI1DvL,CAAyBsL,I,oBCzDnBG,I,8KAEjB,OACE,6BACE,wBAAI9P,UAAU,UACZ,4BACE,2BAAOoC,KAAK,QAAQoB,KAAI,mBAAc/D,KAAKX,MAAMiR,eAAzB,YAAmDzM,MAAM,IAAI0M,QAASvQ,KAAKX,MAAMmR,uBACzG,qDAEF,4BACE,2BAAO7N,KAAK,QAAQoB,KAAI,mBAAc/D,KAAKX,MAAMiR,eAAzB,YAAmDzM,MAAM,IAAI0M,QAASvQ,KAAKX,MAAMmR,wBAE3G,4BACE,2BAAO7N,KAAK,QAAQoB,KAAI,mBAAc/D,KAAKX,MAAMiR,eAAzB,YAAmDzM,MAAM,IAAI0M,QAASvQ,KAAKX,MAAMmR,uBACzG,2CAEF,4BACE,2BAAO7N,KAAK,QAAQoB,KAAI,mBAAc/D,KAAKX,MAAMiR,eAAzB,YAAmDzM,MAAM,IAAI0M,QAASvQ,KAAKX,MAAMmR,wBAE3G,4BACE,2BAAO7N,KAAK,QAAQoB,KAAI,mBAAc/D,KAAKX,MAAMiR,eAAzB,YAAmDzM,MAAM,IAAI0M,QAASvQ,KAAKX,MAAMmR,uBACzG,wD,GArBkChQ,cCAzBiQ,G,kDACnB,WAAYpR,GAAQ,uCACZA,G,iEAMaoP,GACnB,IAAI5K,EAAQ6M,OAAOjC,EAAMC,OAAO7K,OAChC7D,KAAKX,MAAMsR,qBAAqB3Q,KAAKX,MAAMT,MAAOiF,K,+BAKlD,OACE,6BACE,uBAAGtD,UAAU,eAAc,gCAASP,KAAKX,MAAM+D,OAC/C,kBAAC,GAAD,CAAkBkN,eAAgBtQ,KAAKX,MAAMT,MAAO4R,qBAAsBxQ,KAAK2Q,qBAAqBC,KAAK5Q,a,GAlB3EQ,aCIlCqQ,GAAqB,CACvBC,kBAAmB,oBACnBC,OAAQ,SACRC,kBAAmB,oBACnBC,gBAAiB,kBACjBC,iBAAkB,oBAOdC,G,kDAEJ,WAAY9R,GAAQ,IAAD,8BACjB,cAAMA,IAEDyF,MAAQ,CACX3E,MAAO,GACPiR,eAAgB,GAChBC,UAAW,CACT,CACEjO,KAAM,2CACNkO,SAAUT,GAAmBE,QAE/B,CACE3N,KAAM,mDACNkO,SAAUT,GAAmBK,kBAE/B,CACE9N,KAAM,2DACNkO,SAAUT,GAAmBG,mBAE/B,CACE5N,KAAM,6CACNkO,SAAUT,GAAmBC,mBAE/B,CACE1N,KAAM,+CACNkO,SAAUT,GAAmBI,iBAE/B,CACE7N,KAAM,gCACNkO,SAAUT,GAAmBC,mBAE/B,CACE1N,KAAM,+BACNkO,SAAUT,GAAmBG,mBAE/B,CACE5N,KAAM,uCACNkO,SAAUT,GAAmBK,kBAE/B,CACE9N,KAAM,mCACNkO,SAAUT,GAAmBE,QAE/B,CACE3N,KAAM,+DACNkO,SAAUT,GAAmBI,iBAE/B,CACE7N,KAAM,8CACNkO,SAAUT,GAAmBG,mBAE/B,CACE5N,KAAM,qCACNkO,SAAUT,GAAmBE,QAE/B,CACE3N,KAAM,oDACNkO,SAAUT,GAAmBG,mBAE/B,CACE5N,KAAM,8BACNkO,SAAUT,GAAmBK,kBAE/B,CACE9N,KAAM,yDACNkO,SAAUT,GAAmBK,kBAE/B,CACE9N,KAAM,oCACNkO,SAAUT,GAAmBC,mBAE/B,CACE1N,KAAM,6DACNkO,SAAUT,GAAmBI,iBAE/B,CACE7N,KAAM,sCACNkO,SAAUT,GAAmBE,QAE/B,CACE3N,KAAM,qCACNkO,SAAUT,GAAmBC,qBAKnC,EAAKS,yBAA2B,EAAKA,yBAAyBX,KAA9B,gBAtFf,E,qEA0FMhS,EAAOiF,GAC9B,IAAIwN,EAAS,aAAOrR,KAAK8E,MAAMuM,WAC3BG,EAAW,6BACVxR,KAAK8E,MAAMuM,UAAUzS,IADX,IAEbiF,MAAOA,IAGTwN,EAAUzS,GAAS4S,EAEnBxR,KAAKmF,SAAS,CAACkM,gB,oLAKQrR,KAAKX,MAAM0D,IAAI4D,gBAAgB,CAAClB,MAAO,GAAImB,WAAY,c,cAA1EF,E,OACA+K,EAAkB,CACpBC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,GAGNnL,EAAWxE,KAAKI,MAAM5D,SAAQ,SAACoN,GAC7B,IAAK,IAAIgG,EAAI,EAAGA,EAAIhG,EAAOiG,OAAOrJ,OAAQoJ,IAAK,CAC7C,IAAIE,EAAQlG,EAAOiG,OAAOD,IAEK,IAA3BE,EAAMC,QAAQ,UAA8C,IAA5BD,EAAMC,QAAQ,WAAmD,IAAhCD,EAAMC,QAAQ,eACpD,IAA3BD,EAAMC,QAAQ,QAChBR,EAAgBC,MACoB,IAA3BM,EAAMC,QAAQ,UAA4C,IAA1BD,EAAMC,QAAQ,SAA6C,IAA5BD,EAAMC,QAAQ,SACtFR,EAAgBE,MACuB,IAA9BK,EAAMC,QAAQ,aAAuD,IAAlCD,EAAMC,QAAQ,iBAAmD,IAA1BD,EAAMC,QAAQ,SAC3D,IAA7BD,EAAMC,QAAQ,UACvBR,EAAgBG,MACmB,IAA1BI,EAAMC,QAAQ,SAA+C,IAA9BD,EAAMC,QAAQ,aAAgD,IAA3BD,EAAMC,QAAQ,UACrD,IAA3BD,EAAMC,QAAQ,UAA4C,IAA1BD,EAAMC,QAAQ,SAAkD,IAAjCD,EAAMC,QAAQ,gBACjD,IAA5BD,EAAMC,QAAQ,WAA+C,IAA5BD,EAAMC,QAAQ,WAAgD,IAA7BD,EAAMC,QAAQ,WACzFR,EAAgBI,SAKlBK,EAAoBrT,OAAOC,KAAK2S,GAAiBU,QAAO,SAAUC,EAAMrT,GAC1E,OAAKqT,EAEMX,EAAgB1S,GAAO0S,EAAgBW,GACzCrT,EAEAqT,EAJArT,IAMR,M,gCAGDsT,iBAAkBH,GACfT,I,mRASDzR,KAAK8E,MAAMuM,UAAUiB,MAAK,SAACC,GAAe,OAAyB,MAAlBA,EAAS1O,S,uBAC5D7D,KAAKmF,SAAS,CAAChF,MAAO,qC,0BAGtBH,KAAKmF,SAAS,CAAChF,MAAO,K,cAKpBqS,EAAsBxS,KAAKyS,4BAC3BC,EAAuB1S,KAAK2S,2B,UAEL3S,KAAK4S,0B,QAA5BC,E,OAEJ7S,KAAKmF,SAAS,CAACiM,eAAe,GAAD,OAAKsB,EAAL,YAA6BF,EAAoB,GAAGM,MAApD,OAA2DN,EAAoB,GAAGM,KAAlF,YAA0FD,EAAeR,oBACtInT,OAAO6T,SAAS,CAACC,IAAK,EAAGC,KAAM,EAAGC,SAAU,WAC5C7U,SAAS8U,eAAe,oBAAoBC,UAAUC,OAAO,U,wJAK7D,IAAIC,EAAuBtT,KAAK8E,MAAMuM,UAAUxL,QAAO,SAAC0M,GAAD,OAAcA,EAASjB,UAAYT,GAAmBC,qBACzGyC,EAAkBD,EAAqBnB,QAAO,SAAC5L,EAAOgM,GAAe,OAAOhM,EAAQgM,EAAS1O,QAAS,GAAMyP,EAAqB5K,OAErI,OAAI6K,EAAiB,EACZ,IACEA,EAAiB,EACnB,IAEA,M,kDAKT,IAAIC,EAAkBxT,KAAK8E,MAAMuM,UAAUxL,QAAO,SAAC0M,GAAD,OAAcA,EAASjB,UAAYT,GAAmBE,UACpG0C,EAA2BzT,KAAK8E,MAAMuM,UAAUxL,QAAO,SAAC0M,GAAD,OAAcA,EAASjB,UAAYT,GAAmBK,oBAC7GwC,EAA0B1T,KAAK8E,MAAMuM,UAAUxL,QAAO,SAAC0M,GAAD,OAAcA,EAASjB,UAAYT,GAAmBI,mBAC5G0C,EAA4B3T,KAAK8E,MAAMuM,UAAUxL,QAAO,SAAC0M,GAAD,OAAcA,EAASjB,UAAYT,GAAmBG,qBAE9G4C,EAAaJ,EAAgBrB,QAAO,SAAC5L,EAAOgM,GAAe,OAAOhM,EAAQgM,EAAS1O,QAAS,GAAM2P,EAAgB9K,OAClHmL,EAAsBJ,EAAyBtB,QAAO,SAAC5L,EAAOgM,GAAe,OAAOhM,EAAQgM,EAAS1O,QAAS,GAAM4P,EAAyB/K,OAC7IoL,EAAqBJ,EAAwBvB,QAAO,SAAC5L,EAAOgM,GAAe,OAAOhM,EAAQgM,EAAS1O,QAAS,GAAM6P,EAAwBhL,OAC1IqL,EAAuBJ,EAA0BxB,QAAO,SAAC5L,EAAOgM,GAAe,OAAOhM,EAAQgM,EAAS1O,QAAS,GAAM8P,EAA0BjL,OAoBpJ,MAlBuB,CAAC,CACpB,KAAQ,KACR,SAAYmI,GAAmBE,OAC/B,IAAO6C,GACN,CACD,KAAQ,KACR,SAAY/C,GAAmBK,iBAC/B,IAAO2C,GACN,CACD,KAAQ,KACR,SAAYhD,GAAmBI,gBAC/B,IAAO6C,GACN,CACD,KAAQ,KACR,SAAYjD,GAAmBG,kBAC/B,IAAO+C,IACLrK,MAAK,SAAC5H,EAAG6H,GAAQ,OAAOA,EAAEqK,IAAMlS,EAAEkS,S,+BAMhC,IAAD,OACP,OACE,kBAAC7P,EAAA,EAAD,CAAKC,GAAI,GAAI7D,UAAU,QAEvB,yBAAKA,UAAU,QACb,uEACA,0fAQF,yBAAKA,UAAU,oBACb,4BAAKP,KAAK8E,MAAMsM,iBAGlB,6BACE,wBAAIrQ,GAAG,mBAAmBR,UAAU,UAClC,4BACE,uBAAGA,UAAU,QAAO,qEACpB,kKAEF,4BACA,uBAAGA,UAAU,QAAO,uFACpB,oIACA,4BACE,4BACE,uBAAGA,UAAU,QAAO,gDACpB,wGAEF,4BACE,uBAAGA,UAAU,QAAO,0DACpB,wIAEF,4BACE,uBAAGA,UAAU,QAAO,2DACpB,gIAEF,4BACE,uBAAGA,UAAU,QAAO,yDACpB,gGAIJ,4BACA,uBAAGA,UAAU,QAAO,kFACpB,mPAKA,4BACE,4BACE,uBAAGA,UAAU,QAAO,gEACpB,yGAEF,4BACE,uBAAGA,UAAU,QAAO,gEACpB,qGAEF,4BACE,uBAAGA,UAAU,QAAO,iEACpB,gHAEF,4BACE,uBAAGA,UAAU,QAAO,gEACpB,yHAOR,yBAAKA,UAAU,QACZP,KAAK8E,MAAMuM,UAAUhM,KAAI,SAACkN,EAAU3T,GACnC,OAAO,kBAAC,GAAD,CACGmC,GAAE,oBAAenC,GACjBA,MAAOA,EACPG,IAAKH,EACLwE,KAAMmP,EAASnP,KACfkO,SAAUiB,EAASjB,SACnBX,qBAAsB,EAAKY,+BAKzC,yBAAKhR,UAAU,eACf,kBAACU,EAAA,EAAD,CACIV,UAAU,oBACVY,QAASnB,KAAKiU,6BAA6BrD,KAAK5Q,OAFpD,4BAII,wBAAIO,UAAU,eAAeP,KAAK8E,MAAM3E,a,GA1TPK,aAyU5BoE,gBANS,SAAAE,GACtB,MAAO,CACL/B,IAAK+B,EAAM/B,IAAM+B,EAAM/B,IAAInB,WAAa,QAI7BgD,CAAyBuM,IC1UlC+C,I,gEACJ,WAAY7U,GAAQ,IAAD,8BACjB,cAAMA,IAEDyF,MAAQ,CACXqP,UAAU,EACV3U,MAAO,IAGTF,IAAS,gBARQ,E,gEAWE,IAAD,OAGZ8U,EAAiB,WACrBlV,OAAO6T,SAAS,EAAG,IAGrB7T,OAAOoC,iBAAiB,aAAc8S,GACtClV,OAAOoC,iBAAiB,eAAgB8S,GAExClV,OAAOoC,iBAAiB,cAAc,WACpC,EAAK+S,mBAGPrU,KAAKqU,kB,sCAIL,IAAI7U,EtB/BD,SAAmB5B,GAGxB,IAFA,IAAImG,EAAOnG,EAAQ,IACf0W,EAAKjW,SAASC,OAAOiW,MAAM,KACtBzC,EAAI,EAAGA,EAAIwC,EAAG5L,OAAQoJ,IAAK,CAElC,IADA,IAAI0C,EAAIF,EAAGxC,GACY,MAAhB0C,EAAEC,OAAO,IACdD,EAAIA,EAAEE,UAAU,GAElB,GAAwB,IAApBF,EAAEvC,QAAQlO,GACZ,OAAOyQ,EAAEE,UAAU3Q,EAAK2E,OAAQ8L,EAAE9L,QAGtC,MAAO,GsBmBOiM,CAAU,sBAER,KAAVnV,GAAgBA,GAASQ,KAAK8E,MAAMtF,OACtCQ,KAAKmF,SAAS,CAAEgP,UAAU,EAAM3U,MAAOA,IACvCQ,KAAKX,MAAMuV,cAAcpV,IACN,KAAVA,GACTQ,KAAKmF,SAAS,CAAEgP,UAAU,EAAO3U,MAAO,O,+BAIlC,IACF2U,EAAanU,KAAK8E,MAAlBqP,SAEN,OACE,kBAAC,IAAD,KACE,yBAAK5T,UAAU,GAAGQ,GAAG,eACnB,kBAAC,EAAD,CAAQS,WAAY2S,IAEnBA,EACC,yBAAKpT,GAAG,0BACN,kBAAC8T,GAAA,EAAD,KACE,kBAACzP,EAAA,EAAD,KACE,kBAAC,IAAD,CAAO0P,OAAK,EAACC,KAAK,cAAcC,UAAWhN,KAC3C,kBAAC,IAAD,CACE8M,OAAK,EACLC,KAAK,oBACLC,UAAW9E,KAEb,kBAAC,IAAD,CAAO4E,OAAK,EAACC,KAAK,yBAAyBC,UAAW7D,QAK5D,kBAAC0D,GAAA,EAAD,KACE,kBAAC,EAAD,a,GAhEII,IAAMzU,YA+EToE,eAAQ,MANI,SAAC/C,GAC1B,MAAO,CACL+S,cAAe,SAACM,GAAD,OAAiBrT,EC1FD,SAAAqT,GAAW,OAAI,SAAArT,GAChD,IAAID,EAAa,IAAIuT,IAAc,CACjCtV,SAAUnC,EACVoC,YvBCqB,0BuBEvB8B,EAAWwT,eAAeF,GAE1BrT,EAAS,CACPc,KAAM,kBACNC,QAAShB,KDgFgCyT,CAAoBH,QAIlDtQ,CAAkCsP,IErF7BoB,QACW,cAA7BpW,OAAOQ,SAAS6V,UAEe,UAA7BrW,OAAOQ,SAAS6V,UAEhBrW,OAAOQ,SAAS6V,SAASC,MACvB,2D,uBCdSC,8BAAgB,CAC7B1S,ICLa,WAAyB,IAAxB+B,EAAuB,uDAAf,GAAI4Q,EAAW,uCACrC,OAAQA,EAAO/S,MACb,IAAK,kBACH,OAAO,6BACFmC,GADL,IAEElD,WAAY8T,EAAO9S,UAEvB,QACE,OAAOkC,IDFX9B,SENa,WAAyB,IAAxB8B,EAAuB,uDAAf,GAAI4Q,EAAW,uCACrC,OAAQA,EAAO/S,MACb,IAAK,wBACH,OAAO,6BACFmC,GADL,IAEEqL,iBAAkBuF,EAAO9S,UAE7B,IAAK,0BACH,OAAO,6BACFkC,GADL,IAEEQ,kBAAmBoQ,EAAO9S,UAE9B,QACE,OAAOkC,M,UCJb6Q,IAASC,OACP,kBAAC,IAAD,CACEC,MCFW,WAA4C,IAApBC,EAAmB,uDAAJ,GACpD,OAAOC,uBACLC,GACAF,EACAG,+BAAoBC,2BAAgBC,QDF7BC,CAAe,CAAErT,IAAK,KAAMC,SAAU,CAAEsC,kBAAmB,OAElE,kBAAC,GAAD,OAEFjH,SAAS8U,eAAe,SJkHpB,kBAAmBkD,WACrBA,UAAUC,cAAcC,MAAMtU,MAAK,SAAAuU,GACjCA,EAAaC,iB","file":"static/js/main.4444dd56.chunk.js","sourcesContent":["import camelCaseKeys from \"camelcase-keys\";\n\nexport let spotifyScopes =\n  \"user-top-read user-library-read \" +\n  \"playlist-modify-public playlist-read-private playlist-read-collaborative \" +\n  \"user-read-email playlist-modify-private streaming\";\n\nexport let redirectURI = \"http://localhost:3000\";\nexport let clientID = \"90a54f792a9e4fff94eec8d0c0075bd0\";\n\nexport function setCookie(cname, cvalue, expirationHours) {\n  var d = new Date();\n  d.setTime(d.getTime() + expirationHours * 60 * 60 * 1000);\n  var expires = \"expires=\" + d.toUTCString();\n  document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\n\nexport function getCookie(cname) {\n  var name = cname + \"=\";\n  var ca = document.cookie.split(\";\");\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n    while (c.charAt(0) === \" \") {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) === 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return \"\";\n}\n\nexport function deepCamelCaseKeys(variable) {\n  if (variable === null) {\n    return null;\n  } else if (variable instanceof Array) {\n    variable.forEach((object, index) => {\n      variable[index] = deepCamelCaseKeys(object);\n    });\n\n    return variable;\n  } else if (variable instanceof Object) {\n    Object.keys(variable).forEach((key) => {\n      variable[key] = deepCamelCaseKeys(variable[key]);\n    });\n\n    return camelCaseKeys(variable);\n  } else {\n    return variable;\n  }\n}\n\nexport function isBelowLargeBreakpoint() {\n  return window.innerWidth < 1200;\n}\n\nexport function isBelowMediumBreakpoint() {\n  return window.innerWidth < 992;\n}\n\nexport function isBelowSmallBreakpoint() {\n  return window.innerWidth < 768;\n}\n\nexport function isBelowExtraSmallBreakpoint() {\n  return window.innerWidth < 576;\n}\n\nexport function msToHM(ms) {\n  let seconds = ms / 1000;\n\n  let hours = Math.floor(seconds / 3600);\n  seconds = seconds % 3600;\n\n  let minutes = Math.floor(seconds / 60);\n\n  return {\n    hours,\n    minutes,\n  };\n}\n","import React, { Component } from \"react\";\nimport SpotifyLogin from \"react-spotify-login\";\nimport { spotifyScopes, setCookie } from \"../../common/constants\";\nimport autoBind from \"react-autobind\";\nimport { redirectURI, clientID } from \"../../common/constants\";\nimport \"./sign-in.css\";\n\nclass SpotifyLoginButton extends Component {\n  constructor(props) {\n    super(props);\n\n    autoBind(this);\n  }\n\n  async handleAccessToken(data) {\n    let token = data.access_token;\n\n    // Set the token in cookies, we want to make sure that this happens first so we await it.\n    await setCookie(\"spotifyAccessToken\", token, 1);\n    document.location.reload();\n  }\n\n  render() {\n    return (\n      <SpotifyLogin\n        buttonText=\"LOG IN USING SPOTIFY\"\n        clientId={clientID}\n        redirectUri={redirectURI}\n        onSuccess={this.handleAccessToken}\n        onFailure={(error) => console.log(error)}\n        scope={spotifyScopes}\n        className=\"btn btn-md btn-primary pn-primary-button pn-button button-font\"\n      />\n    );\n  }\n}\n\nexport default SpotifyLoginButton;\n","import React, { Component } from \"react\";\n\nexport default class Spacer extends Component {\n  render() {\n    return (\n      <div\n        style={{\n          height: `${\n            this.props.percentage\n              ? this.props.percentage + \"vh\"\n              : this.props.pixels + \"px\"\n          }`\n        }}\n      ></div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport SpotifyLoginButton from \"./SpotifyLoginButton\";\nimport Spacer from \"../../common/components/Spacer\";\nimport \"./sign-in.css\";\nimport { Col, Row } from \"react-bootstrap\";\n\nclass LoginPage extends Component {\n  render() {\n    return (\n      <div id=\"logged-out-wrapper\" className=\"my-5 flex-content-center\">\n        <div>\n          <h1 className=\"large-header-font mobile-title-font mb-4\">\n            Completely control the composition of your playlists.\n          </h1>\n          <p className=\"paragraph-font\">\n            PlaylistNinja gives you the power to fine tune the powerful\n            recommendation engine in the Spotify API.\n          </p>\n          <p className=\"paragraph-font mb-4\">\n            We give you an interface that exposes the properties used in the\n            recommendation engine, allowing you to configure recommendations and\n            discover new music by selecting seeds and target properties when\n            searching for songs.\n          </p>\n          <SpotifyLoginButton />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LoginPage;\n","import React, { Component } from \"react\";\nimport { setCookie } from \"../../common/constants\";\nimport { Button } from \"react-bootstrap\";\nimport autoBind from \"react-autobind\";\n\nclass SpotifyLogoutButton extends Component {\n  constructor(props) {\n    super(props);\n\n    autoBind(this);\n  }\n\n  handleLogout() {\n    // remove the cookie from the browser that holds the token to logout\n    setCookie(\"spotifyAccessToken\", \"\", 0);\n    document.location.reload();\n  }\n\n  render() {\n    return (\n      <Button\n        variant=\"primary\"\n        className=\"pn-danger-button button-font pn-button button-font\"\n        onClick={this.handleLogout}\n      >\n        LOG OUT\n      </Button>\n    );\n  }\n}\n\nexport default SpotifyLogoutButton;\n","import React, { Component } from \"react\";\nimport \"./common-components.css\";\nimport { isBelowSmallBreakpoint } from \"../constants\";\nimport { Link } from \"react-router-dom\";\n\nexport default class Navbar extends Component {\n  componentDidMount() {\n    window.addEventListener(\"resize\", () => {\n      this.forceUpdate();\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"main-app-nav\">\n          {!this.props.noButtons && (\n            <div className=\"main-nav-button\">\n              <Link to=\"profile\" className=\"text-dark\">\n                <i\n                  className={`far fa-address-card ${\n                    isBelowSmallBreakpoint()\n                      ? \"main-nav-icon-phone\"\n                      : \"main-nav-icon-desktop\"\n                  }`}\n                />\n              </Link>\n            </div>\n          )}\n\n          <div className=\"main-nav-button\">\n            {isBelowSmallBreakpoint() ? (\n              <h6 className=\"m-0 mt-1 nav-title\">PLAYLIST NINJA</h6>\n            ) : (\n              <h4 className=\"m-0 mt-1 nav-title\">PLAYLIST NINJA</h4>\n            )}\n          </div>\n\n          {!this.props.noButtons && (\n            <div className=\"main-nav-button\">\n              <Link to=\"playlist-builder\" className=\"text-dark\">\n                <i\n                  className={`fa fa-sliders-h ${\n                    isBelowSmallBreakpoint()\n                      ? \"main-nav-icon-phone\"\n                      : \"main-nav-icon-desktop\"\n                  }`}\n                />\n              </Link>\n            </div>\n          )}\n        </div>\n        <div className=\"main-app-nav-ghost\" />\n      </div>\n    );\n  }\n}\n","export const setSelectedPlaylist = (\n  playlistId,\n  spotifyApi\n) => async dispatch => {\n  let playlistResponse = null;\n\n  await spotifyApi\n    .getPlaylist(playlistId)\n    .then(\n      async data => {\n        playlistResponse = data.body;\n\n        let notAllTracks = playlistResponse.tracks.next;\n\n        playlistResponse.tracks = playlistResponse.tracks.items;\n\n        if (notAllTracks) {\n          let offset = 100;\n\n          while (notAllTracks) {\n            await spotifyApi\n              .getPlaylistTracks(playlistId, { offset })\n              .then(data => {\n                if (!data.body.next) {\n                  notAllTracks = false;\n                }\n\n                offset += 100;\n\n                playlistResponse.tracks = playlistResponse.tracks.concat(\n                  data.body.items\n                );\n              });\n          }\n        }\n      },\n      error => {\n        playlistResponse = error;\n      }\n    )\n    .then(() => {\n      window.location.hash = \"#/playlist-builder\";\n    });\n\n  dispatch({\n    type: \"SET_SELECTED_PLAYLIST\",\n    payload: playlistResponse\n  });\n};\nexport const loadUsersEditablePlaylists = (\n  userId,\n  spotifyApi\n) => async dispatch => {\n  let playlistsResponse = null;\n\n  await spotifyApi.getUserPlaylists(userId, { limit: 50 }).then(\n    async response => {\n      playlistsResponse = response.body.items;\n      let notAllPlaylists = response.body.next;\n\n      if (notAllPlaylists) {\n        let offset = 50;\n\n        while (notAllPlaylists) {\n          await spotifyApi\n            .getUserPlaylists(userId, { limit: 50, offset })\n            .then(morePlaylistsResponse => {\n              if (!morePlaylistsResponse.body.next) {\n                notAllPlaylists = false;\n              }\n\n              offset += 50;\n\n              playlistsResponse = playlistsResponse.concat(\n                morePlaylistsResponse.body.items\n              );\n            });\n        }\n      }\n\n      playlistsResponse = playlistsResponse.filter(playlist => {\n        return playlist.owner.id == userId || playlist.collaborative;\n      });\n    },\n    error => {\n      playlistsResponse = error;\n    }\n  );\n\n  dispatch({\n    type: \"LOAD_EDITABLE_PLAYLISTS\",\n    payload: playlistsResponse\n  });\n};\n","import React, { Component } from \"react\";\nimport { Row, Col, Image, Button } from \"react-bootstrap\";\nimport autoBind from \"react-autobind\";\nimport { connect } from \"react-redux\";\nimport Swal from \"sweetalert2\";\nimport \"./playlists.css\";\nimport { setSelectedPlaylist } from \"../../../../redux/actions/playlistActions\";\nimport {\n  isBelowSmallBreakpoint,\n  isBelowExtraSmallBreakpoint,\n} from \"../../../../common/constants\";\n\nclass PlaylistCard extends Component {\n  constructor(props) {\n    super(props);\n\n    autoBind(this);\n  }\n\n  selectPlaylist() {\n    let { updateSelectedPlaylist, api, playlist } = this.props;\n\n    updateSelectedPlaylist(playlist.id, api);\n  }\n\n  /**\n   *  Renders a confirmation alert to make sure that the user wants to unfollow their playlist.\n   */\n\n  unfollowConfirmation() {\n    return Swal.fire({\n      title: \"Unfollow Playlist\",\n      text:\n        \"Are you sure you want to unfollow? It will no longer be visible in your library.\",\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: \"Yes, unfollow this playlist.\",\n      cancelButtonText: \"Cancel\",\n      allowEscapeKey: false,\n      allowOutsideClick: false,\n    });\n  }\n\n  /**\n   *  Unfollows the playlist that this PlaylistCard represents.\n   */\n  unfollowPlaylist() {\n    let { playlist, api, updatePlaylists } = this.props;\n\n    this.unfollowConfirmation().then((result) => {\n      if (result.value) {\n        api.unfollowPlaylist(playlist.id).then(() => {\n          Swal.fire({\n            type: \"success\",\n            text: `Unfollowed playlist: \"${playlist.name}\"`,\n          });\n          updatePlaylists();\n        });\n      } else if (result.dismiss === Swal.DismissReason.cancel) {\n        Swal.fire({ text: \"Did not unfollow playlist.\" });\n      }\n    });\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", () => {\n      this.forceUpdate();\n    });\n  }\n\n  render() {\n    let { playlist } = this.props;\n\n    return (\n      <Col\n        xs={12}\n        md={6}\n        className={isBelowSmallBreakpoint() ? \"p-4\" : \"p-3\"}\n      >\n        <div className=\"playlist-card-content d-flex playlist-card\">\n          {playlist.images[0] ? (\n            <Image\n              src={playlist.images[0].url}\n              className=\"mobile-playlist-card-image\"\n            />\n          ) : (\n            <div className={isBelowSmallBreakpoint() ? \"w-25\" : \"\"} />\n          )}\n          <div className=\"text-left pl-4\">\n            <p className=\"mb-0 paragraph-font fw-700\">{playlist.name}</p>\n            <p className=\"m-0 mb-3 paragraph-font\">{playlist.public ? \"Public\" : \"Private\"}</p>\n\n            <Button\n              variant=\"primary\"\n              className=\"pn-primary-button pn-button button-font mr-1\"\n              onClick={this.selectPlaylist}\n            >\n              <i className=\"fa fa-pencil\"></i>\n            </Button>\n            <Button\n              variant=\"outline-danger\"\n              className=\"pn-danger-button pn-button button-font\"\n              onClick={this.unfollowPlaylist}\n            >\n              <i className=\"fa fa-trash\"></i>\n            </Button>\n          </div>\n        </div>\n      </Col>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    updateSelectedPlaylist: (playlistId, spotifyApi) =>\n      dispatch(setSelectedPlaylist(playlistId, spotifyApi)),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(PlaylistCard);\n","import React, { Component } from \"react\";\nimport { Row, Col } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport autoBind from \"react-autobind\";\nimport PlaylistCard from \"./PlaylistCard\";\nimport Spacer from \"../../../../common/components/Spacer\";\nimport { loadUsersEditablePlaylists } from \"../../../../redux/actions/playlistActions\";\n\nclass PersonalPlaylists extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      playlists: null,\n      error: null,\n    };\n\n    autoBind(this);\n  }\n\n  componentDidMount() {\n    this.getPersonalPlaylistData();\n  }\n\n  getPersonalPlaylistData() {\n    let { userId, api } = this.props;\n\n    if (userId) {\n      this.props.loadEditablePlaylists(userId, api);\n    } else {\n      this.setState({ error: \"No user ID found, please reload\" });\n    }\n  }\n\n  render() {\n    if (this.props.playlists) {\n      let { playlists } = this.props;\n\n      return (\n        <div>\n          <Row className=\"m-3 pb-2\">\n            <Col xs={12}>\n              <h3 className=\"sub-header-font\"> My Playlists </h3>\n              <Spacer percentage={3} />\n            </Col>\n          </Row>\n\n          <Row>\n            {playlists.map((playlist) => {\n              return (\n                <PlaylistCard\n                  playlist={playlist}\n                  api={this.props.api}\n                  updatePlaylists={this.getPersonalPlaylistData}\n                />\n              );\n            })}\n          </Row>\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport const mapStateToProps = (state) => {\n  return {\n    api: state.api.spotifyApi,\n    playlists: state.playlist.editablePlaylists,\n  };\n};\n\nexport const mapDispatchToProps = (dispatch) => {\n  return {\n    loadEditablePlaylists: (userId, spotifyApi) =>\n      dispatch(loadUsersEditablePlaylists(userId, spotifyApi)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PersonalPlaylists);\n","import React, { Component } from \"react\";\nimport { Image, Col, Row } from \"react-bootstrap\";\nimport Spacer from \"../../../common/components/Spacer\";\nimport SpotifyLogoutButton from \"../../spotify-sign-in/SpotifyLogoutButton\";\n\nclass ProfileInfo extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { profile } = this.props;\n\n    if (profile) {\n      let {\n        profile: { displayName, email, id, images, externalUrls, followers },\n      } = this.props;\n\n      return (\n        <Row>\n          <Col xs={12} md={12} className=\"break-long-words text-center-md\">\n            <h1 className=\"large-header-font m-0\">Welcome, </h1>\n            <h1 className=\"large-header-font\">{displayName}</h1>\n            <p className=\"paragraph-font m-0\">{email}</p>\n            <p className=\"paragraph-font mb-4\">{followers.total} followers</p>\n            <SpotifyLogoutButton />\n          </Col>\n        </Row>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default ProfileInfo;\n","import React, { Component } from \"react\";\nimport { Image, Col, Row, Tabs, Tab } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { deepCamelCaseKeys } from \"../../../common/constants\";\nimport Spacer from \"../../../common/components/Spacer\";\nimport \"./top-artists-and-tracks.css\";\n\nclass TopArtists extends Component {\n  _isMounted = false;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      topArtists: null,\n      error: null,\n    };\n  }\n\n  /**\n   * Sets _isMounted to true and loads top artist data.\n   */\n  componentDidMount() {\n    this._isMounted = true;\n\n    this.props.api.getMyTopArtists({ limit: 6, time_range: \"short_term\" }).then(\n      (data) => {\n        // Only call setState in async functions if mounted\n        if (this._isMounted) {\n          this.setState({ topShortTermArtists: data.body });\n        }\n      },\n      (error) => {\n        if (this._isMounted) {\n          this.setState({ error: deepCamelCaseKeys(error) });\n        }\n      }\n    );\n\n    this.props.api\n      .getMyTopArtists({ limit: 6, time_range: \"medium_term\" })\n      .then(\n        (data) => {\n          // Only call setState in async functions if mounted\n          if (this._isMounted) {\n            this.setState({ topMediumTermArtists: data.body });\n          }\n        },\n        (error) => {\n          if (this._isMounted) {\n            this.setState({ error: deepCamelCaseKeys(error) });\n          }\n        }\n      );\n\n    this.props.api.getMyTopArtists({ limit: 6, time_range: \"long_term\" }).then(\n      (data) => {\n        // Only call setState in async functions if mounted\n        if (this._isMounted) {\n          this.setState({ topLongTermArtists: data.body });\n        }\n      },\n      (error) => {\n        if (this._isMounted) {\n          this.setState({ error: deepCamelCaseKeys(error) });\n        }\n      }\n    );\n\n    this.forceUpdate();\n  }\n\n  /**\n   * Sets _isMounted to false so that we don't call setState accidentally in an async function.\n   */\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    return (\n      <Row className=\"my-5\">\n        <Col xs={12}>\n          <h3 className=\"sub-header-font\"> Top Artists </h3>\n        </Col>\n\n        <Col xs={12} className=\"mt-3\">\n          <Tabs defaultActiveKey=\"shortTerm\" id=\"nav-tabs\" className=\"tab-font\">\n            <Tab eventKey=\"shortTerm\" title=\"Short Term\">\n              <Row className=\"pt-4\">\n                {this.state.topShortTermArtists &&\n                  this.state.topShortTermArtists.items.map((topArtist) => {\n                    return (\n                      <Col xs={6} lg={4} className=\"text-center\">\n                        <div className=\"p-2 break-long-words\">\n                          <Image\n                            src={topArtist.images[0].url}\n                            roundedCircle\n                            fluid\n                            className=\"drop-shadow mb-3\"\n                          />\n                          <p className=\"paragraph-font\">{topArtist.name}</p>\n                        </div>\n                      </Col>\n                    );\n                  })}\n              </Row>\n            </Tab>\n            <Tab eventKey=\"mediumTerm\" title=\"Medium Term\">\n              <Row className=\"pt-4\">\n                {this.state.topMediumTermArtists &&\n                  this.state.topMediumTermArtists.items.map((topArtist) => {\n                    return (\n                      <Col xs={6} md={4} className=\"text-center\">\n                        <div className=\"p-2 break-long-words\">\n                          <Image\n                            src={topArtist.images[0].url}\n                            roundedCircle\n                            fluid\n                            className=\"drop-shadow mb-3\"\n                          />\n                          <p className=\"paragraph-font\">{topArtist.name}</p>\n                        </div>\n                      </Col>\n                    );\n                  })}\n              </Row>\n            </Tab>\n            <Tab eventKey=\"longTerm\" title=\"Long Term\">\n              <Row className=\"pt-4\">\n                {this.state.topLongTermArtists &&\n                  this.state.topLongTermArtists.items.map((topArtist) => {\n                    return (\n                      <Col xs={6} md={4} className=\"text-center\">\n                        <div className=\"p-2 break-long-words\">\n                          <Image\n                            src={topArtist.images[0].url}\n                            roundedCircle\n                            fluid\n                            className=\"drop-shadow mb-3\"\n                          />\n                          <p className=\"paragraph-font\">{topArtist.name}</p>\n                        </div>\n                      </Col>\n                    );\n                  })}\n              </Row>\n            </Tab>\n          </Tabs>\n        </Col>\n      </Row>\n    );\n  }\n}\n\nlet mapStateToProps = (state) => {\n  return {\n    api: state.api.spotifyApi,\n  };\n};\n\nexport default connect(mapStateToProps)(TopArtists);\n","import React, { Component } from \"react\";\nimport { Image, Col, Row, Tabs, Tab } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { deepCamelCaseKeys } from \"../../../common/constants\";\nimport Spacer from \"../../../common/components/Spacer\";\n\nclass TopTracks extends Component {\n  _isMounted = false;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      topTracks: null,\n      error: null\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n\n    this.props.api.getMyTopTracks({ limit: 12, time_range: 'short_term' }).then(\n      data => {\n        if (this._isMounted) {\n          this.setState({ topShortTermTracks: data.body });\n        }\n      },\n      error => {\n        if (this._isMounted) {\n          this.setState({ error: deepCamelCaseKeys(error) });\n        }\n      }\n    );\n\n    this.props.api.getMyTopTracks({ limit: 12, time_range: 'medium_term' }).then(\n      data => {\n        if (this._isMounted) {\n          this.setState({ topMediumTermTracks: data.body });\n        }\n      },\n      error => {\n        if (this._isMounted) {\n          this.setState({ error: deepCamelCaseKeys(error) });\n        }\n      }\n    );\n\n    this.props.api.getMyTopTracks({ limit: 12, time_range: 'long_term' }).then(\n      data => {\n        if (this._isMounted) {\n          this.setState({ topLongTermTracks: data.body });\n        }\n      },\n      error => {\n        if (this._isMounted) {\n          this.setState({ error: deepCamelCaseKeys(error) });\n        }\n      }\n    );\n\n    this.forceUpdate();\n  }\n\n  /**\n   * Sets _isMounted to false so not to call setState on an unmounted component.\n   */\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    return (\n      <Row className=\"p-3\">\n        <Col xs={12} >\n          <h3 className=\"sub-header-font\"> Top Tracks </h3>\n        </Col>\n\n        <Col xs={12} className=\"mt-3\">\n          <Tabs defaultActiveKey=\"shortTerm\" id=\"nav-tabs\" className=\"tab-font\">\n            <Tab eventKey=\"shortTerm\" title=\"Short Term\">\n              <Row className=\"pt-4\">\n                {this.state.topShortTermTracks &&\n                  this.state.topShortTermTracks.items.map(topTrack => {\n                    return (\n                      <Col xs={6} md={4} className=\"text-center\">\n                        <div className=\"p-2 break-long-words\">\n                          <Image\n                            src={topTrack.album.images[0].url}\n                            fluid\n                            className=\"drop-shadow mb-3\"\n                          />\n                          <p className=\"paragraph-font\">{topTrack.name}</p>\n                        </div>\n                      </Col>\n                    );\n                  })}\n              </Row>\n            </Tab>\n            <Tab eventKey=\"mediumTerm\" title=\"Medium Term\">\n              <Row className=\"pt-4\">\n                {this.state.topMediumTermTracks &&\n                  this.state.topMediumTermTracks.items.map(topTrack => {\n                    return (\n                      <Col xs={6} md={4} className=\"text-center\">\n                        <div className=\"p-2 break-long-words\">\n                          <Image\n                            src={topTrack.album.images[0].url}\n                            fluid\n                            className=\"drop-shadow mb-3\"\n                          />\n                          <p className=\"paragraph-font\">{topTrack.name}</p>\n                        </div>\n                      </Col>\n                    );\n                  })}\n              </Row>\n            </Tab>\n            <Tab eventKey=\"longTerm\" title=\"Long Term\">\n              <Row className=\"pt-4\">\n                {this.state.topLongTermTracks &&\n                  this.state.topLongTermTracks.items.map(topTrack => {\n                    return (\n                      <Col xs={6} md={4} className=\"text-center\">\n                        <div className=\"p-2 break-long-words\">\n                          <Image\n                            src={topTrack.album.images[0].url}\n                            fluid\n                            className=\"drop-shadow mb-3\"\n                          />\n                          <p className=\"paragraph-font\">{topTrack.name}</p>\n                        </div>\n                      </Col>\n                    );\n                  })}\n              </Row>\n            </Tab>\n          </Tabs>\n        </Col>\n\n      </Row>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    api: state.api.spotifyApi\n  };\n};\n\nexport default connect(mapStateToProps)(TopTracks);\n","import React, { Component } from \"react\";\nimport \"./profile.css\";\nimport Spacer from \"../../common/components/Spacer\";\nimport PersonalPlaylists from \"./subcomponents/personal-playlists/PersonalPlaylists\";\nimport ProfileInfo from \"./subcomponents/ProfileInfo\";\nimport TopArtists from \"./subcomponents/TopArtists\";\nimport TopTracks from \"./subcomponents/TopTracks\";\nimport { connect } from \"react-redux\";\nimport { deepCamelCaseKeys } from \"../../common/constants\";\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      profile: null,\n      error: null\n    };\n  }\n\n  componentDidMount() {\n    this.props.api.spotifyApi.getMe().then(\n      data => {\n        this.setState({ profile: deepCamelCaseKeys(data.body) });\n      },\n      error => {\n        this.setState({ error: deepCamelCaseKeys(error) });\n      }\n    );\n\n    this.forceUpdate();\n  }\n\n  render() {\n    let { profile } = this.state;\n\n    if (profile) {\n      return (\n        <div className=\"profile-wrapper\">\n          <ProfileInfo profile={profile} />\n          <Spacer percentage={5} />\n          <TopArtists />\n          <Spacer percentage={5} />\n          <TopTracks />\n          <Spacer percentage={5} />\n          <Spacer percentage={5} />\n          <PersonalPlaylists userId={profile.id} />\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    api: state.api\n  };\n};\n\nexport default connect(mapStateToProps)(Profile);\n","import React, { Component } from \"react\";\nimport \"../playlist-builder.css\";\nimport { Image, Col, Row, Button } from \"react-bootstrap\";\nimport autoBind from \"react-autobind\";\nimport {\n  isBelowSmallBreakpoint,\n  deepCamelCaseKeys,\n} from \"../../../common/constants\";\n\nexport default class PlaylistInfo extends Component {\n  componentDidMount() {\n    window.addEventListener(\"resize\", () => {\n      this.forceUpdate();\n    });\n\n    autoBind(this);\n  }\n\n  render() {\n    let { playlist } = this.props;\n\n    return (\n      <div id=\"playlist-info-wrapper\" className=\"p-2\">\n        <Row>\n          <Col className=\"playlist-image-wrapper\" xs={12} sm={6}>\n            {playlist.images[0] ? (\n              <Image\n                src={playlist.images[0].url}\n                className=\"playlist-info-image\"\n              />\n            ) : null}\n          </Col>\n          <Col\n            className=\"playlist-title-desc-wrapper break-long-words p-3\"\n            xs={12}\n            sm={6}\n          >\n            <h1 className=\"large-header-font\">\n              {playlist.name}\n            </h1>\n            <p className=\"paragraph-font mb-0\">{playlist.description || \"No description provided.\"}</p>\n            <p className=\"paragraph-font\">\n              {playlist.followers.total}{\" \"}\n              {playlist.followers.total == 1 ? \"follower\" : \"followers\"}\n            </p>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n\n  async generateHypeCurvePlaylist() {\n    let { api, playlist } = this.props;\n\n    let trackIds = [];\n\n    playlist.tracks.forEach((playlistTrack) => {\n      trackIds.push(playlistTrack.track.id);\n    });\n\n    let haveToLoop = trackIds.length > 100;\n    let trackStatistics = [];\n\n    if (trackIds.length !== 0) {\n      await api\n        .getAudioFeaturesForTracks(trackIds.splice(0, 100))\n        .then((data) => {\n          let response = deepCamelCaseKeys(data.body);\n\n          if (response.audioFeatures) {\n          }\n          trackStatistics = trackStatistics.concat(response.audioFeatures);\n        });\n\n      if (haveToLoop) {\n        let numOfStatisticsReceived = 100;\n\n        while (haveToLoop) {\n          await api\n            .getAudioFeaturesForTracks(trackIds.splice(0, 100))\n            .then((data) => {\n              let response = deepCamelCaseKeys(data.body);\n              trackStatistics = trackStatistics.concat(response.audioFeatures);\n              numOfStatisticsReceived += response.audioFeatures.length;\n            });\n\n          if (numOfStatisticsReceived === trackIds.length) {\n            haveToLoop = false;\n          }\n        }\n      }\n\n      var hypeScores = trackStatistics.map((trackStatistic) => {\n        let {\n          danceability,\n          energy,\n          valence,\n          tempo,\n          popularity,\n          id,\n        } = trackStatistic;\n        return {\n          trackUri: \"spotify:track:\" + id,\n          score: danceability * energy * valence * tempo * popularity,\n        };\n      });\n\n      // here we want to sort the hype scores, iterate through them and add every other element to two arrays.\n      // then we reverse one of the arrays and add it to the end, and we have a hype curve.\n      let sortedHypeScores = hypeScores.sort((a, b) => a.score - b.score);\n\n      var ascendingScores = [];\n      var descendingScores = [];\n\n      sortedHypeScores.forEach((score, index) => {\n        if (index % 2 == 0) {\n          ascendingScores.push(score);\n        } else {\n          descendingScores.push(score);\n        }\n      });\n\n      // Actually make descending scores descending\n      descendingScores.reverse();\n\n      let curvedScores = ascendingScores.concat(descendingScores);\n      let userId = \"\";\n      await api.getMe().then((response) => {\n        userId = response.body.id;\n      });\n\n      var playlistId = \"\";\n      await api\n        .createPlaylist(userId, playlist.name + \" - Hype Curve\")\n        .then((response) => {\n          playlistId = response.body.id;\n        });\n\n      await api.addTracksToPlaylist(\n        playlistId,\n        curvedScores.map((score) => score.trackUri)\n      );\n    }\n  }\n}\n","import React, { Component } from \"react\";\nimport {\n  deepCamelCaseKeys,\n  msToHM,\n  isBelowSmallBreakpoint\n} from \"../../../common/constants\";\nimport { Row, Col, ProgressBar } from \"react-bootstrap\";\n\nclass PlaylistTrackStatistics extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tempo: 0,\n      loudness: 0,\n      danceability: 0,\n      valence: 0,\n      energy: 0,\n      durationMs: 0,\n      popularity: 0\n    };\n  }\n\n  componentDidMount() {\n    this.calculateAverageStatistics();\n\n    window.addEventListener(\"resize\", () => {\n      this.forceUpdate();\n    });\n  }\n\n  async calculateAverageStatistics() {\n    let { api, tracks } = this.props;\n\n    let statistics = {\n      tempo: null,\n      danceability: null,\n      valence: null,\n      energy: null,\n      durationMs: null,\n      popularity: null\n    };\n\n    let trackIds = [];\n\n    tracks.forEach(playlistTrack => {\n      trackIds.push(playlistTrack.track.id);\n      statistics.popularity =\n        statistics.popularity + playlistTrack.track.popularity;\n    });\n\n    let haveToLoop = trackIds.length > 100;\n\n    let trackStatistics = [];\n\n    if (trackIds.length !== 0) {\n      await api\n        .getAudioFeaturesForTracks(trackIds.splice(0, 100))\n        .then(data => {\n          let response = deepCamelCaseKeys(data.body);\n\n          if (response.audioFeatures) {\n            trackStatistics = trackStatistics.concat(response.audioFeatures);\n          }\n        });\n\n      if (haveToLoop) {\n        let numOfStatisticsReceived = 100;\n\n        while (haveToLoop) {\n          await api\n            .getAudioFeaturesForTracks(trackIds.splice(0, 100))\n            .then(data => {\n              let response = deepCamelCaseKeys(data.body);\n              trackStatistics = trackStatistics.concat(response.audioFeatures);\n              numOfStatisticsReceived += response.audioFeatures.length;\n            });\n\n          if (numOfStatisticsReceived === tracks.length) {\n            haveToLoop = false;\n          }\n        }\n      }\n\n      trackStatistics.forEach(trackStatistic => {\n        if (trackStatistic !== null) {\n          statistics.tempo = statistics.tempo + trackStatistic.tempo;\n          statistics.danceability =\n            statistics.danceability + trackStatistic.danceability;\n          statistics.valence = statistics.valence + trackStatistic.valence;\n          statistics.energy = statistics.energy + trackStatistic.energy;\n          statistics.durationMs =\n            statistics.durationMs + trackStatistic.durationMs;\n        }\n      });\n\n      this.setState({\n        tempo: statistics.tempo / tracks.length,\n        danceability: statistics.danceability / tracks.length,\n        valence: statistics.valence / tracks.length,\n        energy: statistics.energy / tracks.length,\n        durationMs: statistics.durationMs,\n        popularity: statistics.popularity / tracks.length\n      });\n    }\n  }\n\n  render() {\n    let {\n      tempo,\n      danceability,\n      valence,\n      energy,\n      durationMs,\n      popularity\n    } = this.state;\n\n    if (!(tempo && danceability && valence && energy && durationMs)) {\n      return (\n        <div className=\"m-1 mt-3\">\n          <Row className=\"p-2 justify-content-center\">\n            <Col xs={12} className=\"p-2 mb-2 text-center\">\n              No tracks in this playlist, so there are no statistics.\n            </Col>\n          </Row>\n        </div>\n      );\n    }\n\n    let duration = msToHM(Math.round(durationMs));\n\n    return (\n      <div className=\"m-1 mt-3\">\n        <Row className=\"p-2 justify-content-center\">\n          <Col xs={4} sm={4} className=\"p-2 mb-2 text-center\">\n            <p\n              className=\"paragraph-font\"\n            >\n              Energy:\n            </p>\n            <ProgressBar animated striped now={energy * 100} />\n          </Col>\n          <Col xs={4} sm={4} className=\"p-2 mb-2 text-center\">\n            <p\n              className=\"paragraph-font\"\n            >\n              Danceability:\n            </p>\n            <ProgressBar animated striped now={danceability * 100} />\n          </Col>\n          <Col xs={4} sm={4} className=\"p-2 mb-2 text-center\">\n            <p\n              className=\"paragraph-font\"\n            >\n              Valence:\n            </p>\n            <ProgressBar animated striped now={valence * 100} />\n          </Col>\n        </Row>\n        <Row className=\"p-2 justify-content-center\">\n          <Col xs={4} sm={4} className=\"p-2 mb-2 text-center\">\n            <p\n              className=\"paragraph-font\"\n            >\n              Tempo: <br />\n              {Math.round(tempo)}BPM\n            </p>\n          </Col>\n          <Col xs={4} sm={4} className=\"p-2 mb-2 text-center\">\n            <p\n              className=\"paragraph-font\"\n            >\n              Duration: <br />\n              {duration.hours > 0 ? duration.hours + \"hrs\" : \"\"}{\" \"}\n              {duration.minutes > 0 ? duration.minutes + \"mins\" : \"\"}\n            </p>\n          </Col>\n          <Col xs={4} sm={4} className=\"p-2 mb-2 text-center\">\n            <p\n              className=\"paragraph-font\"\n            >\n              Popularity: <br />\n              {Math.round(popularity)}\n            </p>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default PlaylistTrackStatistics;\n","import React, { Component } from \"react\";\nimport { Table, Button, Image } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport autoBind from \"react-autobind\";\nimport { setSelectedPlaylist } from \"../../../redux/actions/playlistActions\";\nimport \"../playlist-builder.css\";\n\nclass TrackTable extends Component {\n  constructor(props) {\n    super(props);\n\n    autoBind(this);\n  }\n\n  /**\n   * Handles playling a single track on the user's currently active spotify device.\n   * @param {string} spotifyTrackId The ID of the spotify track that should be played.\n   */\n  handlePlayTrackOnSpotify(spotifyTrackId) {\n    return () => {\n      let { api, playlistId, tracksInPlaylist } = this.props;\n\n      if (tracksInPlaylist) {\n        api\n          .play({\n            context_uri: `spotify:playlist:${playlistId}`,\n            offset: { uri: `spotify:track:${spotifyTrackId}` },\n          })\n          .then(\n            (response) => {\n              //TODO: Handle response data and store currently playing.\n            },\n            (error) => {\n              //TODO: Handle error case\n              console.error(error);\n            }\n          );\n      } else {\n        api\n          .play({\n            uris: [`spotify:track:${spotifyTrackId}`],\n          })\n          .then(\n            (response) => {\n              //TODO: Handle response data and store currently playing.\n            },\n            (error) => {\n              //TODO: Handle error case\n              console.error(error);\n            }\n          );\n      }\n    };\n  }\n\n  /**\n   * Handles adding a single track to the playlist with the id given to the TrackTable\n   * @param {string} spotifyTrackId The ID of the spotify track that should be added.\n   */\n  handleAddTrackToPlaylist(spotifyTrackId) {\n    return () => {\n      let { playlistId, api } = this.props;\n\n      api\n        .addTracksToPlaylist(playlistId, [`spotify:track:${spotifyTrackId}`])\n        .then(\n          async (response) => {\n            // refresh the selected playlist\n            // TODO: make an action to add it instead of reloading the whole playlist.\n            await setSelectedPlaylist(playlistId, api);\n            if (this.props.updateCallback) {\n              this.props.updateCallback();\n            }\n          },\n          (error) => {\n            //TODO: Handle error case\n            console.error(error);\n          }\n        );\n    };\n  }\n\n  /**\n   * Handles removing a single track to the playlist with the id given to the TrackTable\n   * @param {string} spotifyTrackId The ID of the spotify track that should be removed.\n   */\n  handleRemoveTrackFromPlaylist(spotifyTrackId) {\n    return () => {\n      let { playlistId, api, setSelectedPlaylist } = this.props;\n\n      api\n        .removeTracksFromPlaylist(playlistId, [\n          { uri: `spotify:track:${spotifyTrackId}` },\n        ])\n        .then(\n          async (response) => {\n            // refresh the selected playlist\n            // TODO: make an action to add it instead of reloading the whole playlist.\n            await setSelectedPlaylist(playlistId, api);\n\n            if (this.props.updateCallback) {\n              this.props.updateCallback();\n            }\n          },\n          (error) => {\n            //TODO: Handle error case\n            console.error(error);\n          }\n        );\n    };\n  }\n\n  render() {\n    return (\n        <div>\n          {this.props.tracks.map((track) => {\n            return (\n              <div className=\"d-flex w-100 space-between align-center\">\n                <div className=\"maxw-50-view\">\n                  <div className=\"d-flex align-center\">\n                    {track.album.images[0] && (\n                      <Image\n                        src={track.album.images[0].url}\n                        className=\"track-table-image m-1\"\n                      />\n                    )}\n                    <div className=\"break-long-words pl-2 mt-1\">\n                      <p className=\"track-table-title-font mb-0\">{track.name}</p>\n                      <p className=\"track-table-font mb-0\">\n                        {track.artists.map((artist, index) => {\n                          return index === track.artists.length - 1\n                            ? artist.name\n                            : artist.name + \", \";\n                        })}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"h-100 break-long-words d-flex justify-end p-1 align-center\">\n                  {this.props.tracksInPlaylist ? (\n                    <Button\n                      onClick={this.handleRemoveTrackFromPlaylist(track.id)}\n                      className=\"mr-1 mt-1 mb-1 pn-danger-button pn-button button-font\"\n                      variant=\"danger\"\n                    >\n                      <i className=\"fa fa-trash\"></i>\n                    </Button>\n                  ) : (\n                    <Button\n                      onClick={this.handleAddTrackToPlaylist(track.id)}\n                      className=\"mr-1 mt-1 mb-1 pn-primary-button pn-button button-font\"\n                    >\n                    <i className=\"fa fa-plus\"></i>\n                    </Button>\n                  )}\n                  <Button\n                    className=\"ml-1 mt-1 mb-1 pn-primary-button pn-button button-font\"\n                    onClick={this.handlePlayTrackOnSpotify(track.id)}\n                  >\n                    <i className=\"fa fa-play\"></i>\n                  </Button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    api: state.api.spotifyApi,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setSelectedPlaylist: (playlistId, spotifyApi) =>\n      dispatch(setSelectedPlaylist(playlistId, spotifyApi)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackTable);\n","import React, { Component } from \"react\";\nimport { isBelowSmallBreakpoint } from \"../../../common/constants\";\nimport TrackTable from \"./TrackTable\";\nimport { Pagination } from \"react-bootstrap\";\nimport autoBind from \"react-autobind\";\n\nclass PlaylistTracklist extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentPage: 0\n    };\n\n    autoBind(this);\n  }\n\n  /**\n   * Returns an event handler that changes the current page to the\n   * page with the given index.\n   * @param {number} newPageIndex The index of the page to change to.\n   */\n  changeCurrentPageHandler(newPageIndex) {\n    return () => {\n      this.setState({ currentPage: newPageIndex });\n    };\n  }\n\n  render() {\n    let { currentPage } = this.state;\n    let { tracks } = this.props;\n\n    // Copy the tracks and splice the current page from the copy.\n    let tracksCopy = tracks.concat([]);\n    let currentPageTracks = tracksCopy.splice(currentPage * 8, 8);\n\n    // Map the playlist track objects into the actual track objects for display.\n    currentPageTracks = currentPageTracks.map(\n      playlistTrack => playlistTrack.track\n    );\n\n    return (\n      <div>\n        <div>\n          <h3 className=\"sub-header-font\"> Track List </h3>\n          <br />\n        </div>\n        <TrackTable\n          tracks={currentPageTracks}\n          tracksInPlaylist={true}\n          playlistId={this.props.playlistId}\n        />\n        <div className=\"d-flex justify-content-center\">\n          <Pagination>\n            <Pagination.Prev\n              disabled={currentPage === 0}\n              onClick={this.changeCurrentPageHandler(\n                this.state.currentPage - 1\n              )}\n            />\n            <Pagination.Next\n              disabled={(currentPage + 1) * 8 >= tracks.length}\n              onClick={this.changeCurrentPageHandler(\n                this.state.currentPage + 1\n              )}\n            />\n          </Pagination>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PlaylistTracklist;\n","import React, { Component } from \"react\";\nimport TrackTable from \"./TrackTable\";\nimport { connect } from \"react-redux\";\nimport { Form, Button, Row, Col } from \"react-bootstrap\";\nimport autoBind from \"react-autobind\";\nimport Slider from \"rc-slider\";\nimport { setSelectedPlaylist } from \"../../../redux/actions/playlistActions\";\n\nclass Recommendations extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      recommendedTracks: [],\n      selectedArtistSeeds: {\n        0: \"\",\n        1: \"\",\n        2: \"\",\n      },\n      selectedTrackSeeds: {\n        0: \"\",\n        1: \"\",\n        2: \"\",\n      },\n      targetValence: 0.5,\n      targetEnergy: 0.5,\n      targetDanceability: 0.5,\n      targetBPM: 100,\n      targetPopularity: 50,\n      error: null,\n    };\n\n    autoBind(this);\n\n    window.addEventListener(\"resize\", () => {\n      this.forceUpdate();\n    });\n  }\n\n  componentDidMount() {\n    this.handleRecommendationGeneration();\n  }\n\n  /**\n   * A method to update the selected playlist. It calls the redux action to load a selected playlist with this playlist's id.\n   */\n  updateSelectedPlaylist() {\n    let { api, playlistId, setSelectedPlaylist } = this.props;\n    setSelectedPlaylist(playlistId, api);\n  }\n\n  /**\n   * Determines whether or not we should generate recommendations.\n   * Checks that there is at least one seed selected, if not it sets an\n   * error in the state.\n   *\n   * @returns void\n   */\n  handleRecommendationGeneration() {\n    let { selectedArtistSeeds, selectedTrackSeeds } = this.state;\n\n    let atLeastOneSeedSelected = false;\n\n    Object.keys(selectedArtistSeeds).forEach((index) => {\n      if (selectedArtistSeeds[index] !== \"\") {\n        atLeastOneSeedSelected = true;\n      }\n    });\n\n    if (!atLeastOneSeedSelected) {\n      Object.keys(selectedTrackSeeds).forEach((index) => {\n        if (selectedTrackSeeds[index] !== \"\") {\n          atLeastOneSeedSelected = true;\n        }\n      });\n    }\n\n    if (atLeastOneSeedSelected) {\n      this.updateRecommendations();\n    } else {\n      this.setState({\n        error: \"You must choose at least one seed for recommendations.\",\n      });\n    }\n  }\n\n  /**\n   * Updates the recommendations for the playlist with the currently\n   * selected values and seeds and updates the table.\n   *\n   * @returns void\n   */\n  updateRecommendations() {\n    let { api } = this.props;\n    let {\n      selectedArtistSeeds,\n      selectedTrackSeeds,\n      targetValence,\n      targetEnergy,\n      targetDanceability,\n      targetBPM,\n      targetPopularity,\n    } = this.state;\n\n    let seedArtistIds = [];\n    Object.keys(selectedArtistSeeds).forEach((seedIndex) => {\n      if (selectedArtistSeeds[seedIndex] !== \"\") {\n        seedArtistIds.push(selectedArtistSeeds[seedIndex]);\n      }\n    });\n\n    let seedTrackIds = [];\n    Object.keys(selectedTrackSeeds).forEach((seedIndex) => {\n      if (selectedTrackSeeds[seedIndex] !== \"\") {\n        seedTrackIds.push(selectedTrackSeeds[seedIndex]);\n      }\n    });\n\n    let query = {\n      limit: 35,\n      target_bpm: targetBPM,\n      target_valence: targetValence,\n      target_energy: targetEnergy,\n      target_danceability: targetDanceability,\n      target_popularity: targetPopularity,\n      seed_artists: seedArtistIds,\n      seed_tracks: seedTrackIds,\n    };\n\n    api.getRecommendations(query).then(\n      (data) => {\n        this.setState({ recommendedTracks: data.body.tracks, error: null });\n      },\n      (error) => {\n        this.setState({ error: error.message });\n      }\n    );\n  }\n\n  /**\n   * Method to see if all the seeds for recommendations are filled since\n   * Spotify only allows 5 seeds of any type.\n   *\n   * @returns a boolean representing whether or not we have the max amounts of seeds.\n   */\n  numberOfSeedsFull() {\n    let { selectedArtistSeeds, selectedTrackSeeds } = this.state;\n\n    let artistSeeds = [];\n    let trackSeeds = [];\n\n    [0, 1, 2].forEach((seedIndex) => {\n      if (selectedArtistSeeds[seedIndex] !== \"\") {\n        artistSeeds.push(selectedArtistSeeds[seedIndex]);\n      }\n\n      if (selectedTrackSeeds[seedIndex] !== \"\") {\n        trackSeeds.push(selectedTrackSeeds[seedIndex]);\n      }\n    });\n\n    return artistSeeds.length + trackSeeds.length >= 5;\n  }\n\n  /**\n   * Returns an event handler that sets the seed track with the given\n   * index to the value of the event's target.\n   *\n   * @param {number} index The index of the seed artist to change.\n   */\n  handleAddSeedArtist(index) {\n    return (event) => {\n      this.setState({\n        selectedArtistSeeds: {\n          ...this.state.selectedArtistSeeds,\n          [index]: event.target.value,\n        },\n      });\n    };\n  }\n\n  /**\n   * Renders the dropdown menus for selecting seed artists.\n   *\n   * @returns JSX.Element\n   */\n  renderSeedArtistsDropdown() {\n    let { playlistTracks } = this.props;\n\n    let artists = {};\n\n    playlistTracks.forEach((playlistTrack) => {\n      playlistTrack.track.artists.forEach((artist) => {\n        artists[artist.id] = artist.name;\n      });\n    });\n\n    let artistIdArray = Object.keys(artists);\n\n    return (\n      <Form.Group controlId=\"seedArtists\">\n        <Row className=\"w-100\">\n          <Col xs={12} className=\"text-left\">\n            <p className=\"paragraph-font fw-700\">Similar Artists</p>\n          </Col>\n\n          {[1, 2, 3].map((seedNumber) => {\n            let { selectedArtistSeeds } = this.state;\n\n            return (\n              <Col sm={12} md={4}>\n                <Form.Control\n                  key={seedNumber - 1}\n                  as=\"select\"\n                  onChange={this.handleAddSeedArtist(seedNumber - 1)}\n                  disabled={\n                    selectedArtistSeeds[seedNumber - 1] === \"\" &&\n                    this.numberOfSeedsFull()\n                  }\n                >\n                  <option value=\"\">None</option>\n                  {artistIdArray.map((artistId) => {\n                    return (\n                      <option value={artistId}>{artists[artistId]}</option>\n                    );\n                  })}\n                </Form.Control>\n              </Col>\n            );\n          })}\n        </Row>\n      </Form.Group>\n    );\n  }\n\n  /**\n   * Returns an event handler that sets the seed track with the given\n   * index to the value of the event's target.\n   *\n   * @param {number} index The index of the seed track to change.\n   */\n  handleAddSeedTrack(index) {\n    return (event) => {\n      this.setState({\n        selectedTrackSeeds: {\n          ...this.state.selectedTrackSeeds,\n          [index]: event.target.value,\n        },\n      });\n    };\n  }\n\n  /**\n   * Renders the dropdown menus for selecting seed tracks.\n   *\n   * @returns JSX.Element\n   */\n  renderSeedTracksDropdown() {\n    let { playlistTracks } = this.props;\n\n    let tracks = {};\n\n    playlistTracks.forEach((playlistTrack) => {\n      let track = playlistTrack.track;\n\n      tracks[track.id] = track.name;\n    });\n\n    let trackIdArray = Object.keys(tracks);\n\n    return (\n      <Form.Group controlId=\"seedTracks\">\n        <Row className=\"w-100\">\n          <Col xs={12} className=\"text-left\">\n            <p className=\"paragraph-font fw-700\">Similar Tracks</p>\n          </Col>\n\n          {[1, 2, 3].map((seedNumber) => {\n            let { selectedTrackSeeds } = this.state;\n\n            return (\n              <Col sm={12} md={4}>\n                <Form.Control\n                  key={seedNumber - 1}\n                  as=\"select\"\n                  onChange={this.handleAddSeedTrack(seedNumber - 1)}\n                  disabled={\n                    selectedTrackSeeds[seedNumber - 1] === \"\" &&\n                    this.numberOfSeedsFull()\n                  }\n                >\n                  <option value=\"\">None</option>\n                  {trackIdArray.map((trackId) => {\n                    return <option value={trackId}>{tracks[trackId]}</option>;\n                  })}\n                </Form.Control>\n              </Col>\n            );\n          })}\n        </Row>\n      </Form.Group>\n    );\n  }\n\n  /**\n   * Renders the sliders for selecting target audio features for the\n   * recommended tracks.\n   *\n   * @returns JSX.Element\n   */\n  renderAudioFeatureSliders() {\n    return (\n      <Row className=\"w-100\">\n        <Col xs={12} className=\"text-left\">\n          <p className=\"paragraph-font fw-700\">Target Statistics</p>\n        </Col>\n\n        <Col xs={12} className=\"py-2 d-flex align-center space-between\">\n          <p className=\"mb-0 mr-2 paragraph-font\"> Danceability </p>\n          <Slider\n            min={0}\n            max={100}\n            step={1}\n            defaultValue={50}\n            value={this.state.targetDanceability * 100}\n            onChange={(value) =>\n              this.setState({ targetDanceability: value / 100 })\n            }\n            className=\"w-75\"\n          />\n        </Col>\n        <Col xs={12} className=\"py-2 d-flex align-center space-between\">\n          <p className=\"mb-0 mr-2 paragraph-font\"> Energy </p>\n          <Slider\n            min={0}\n            max={100}\n            step={1}\n            defaultValue={50}\n            value={this.state.targetEnergy * 100}\n            onChange={(value) => this.setState({ targetEnergy: value / 100 })}\n            className=\"w-75\"\n          />\n        </Col>\n\n        <Col xs={12} className=\"py-2 d-flex align-center space-between\">\n          <p className=\"mb-0 mr-2 paragraph-font\"> Valence </p>\n          <Slider\n            min={0}\n            max={100}\n            step={1}\n            defaultValue={50}\n            value={this.state.targetValence * 100}\n            onChange={(value) => this.setState({ targetValence: value / 100 })}\n            className=\"w-75\"\n          />\n        </Col>\n\n        <Col xs={12} className=\"py-2 d-flex align-center space-between\">\n          <p className=\"mb-0 mr-2 paragraph-font\"> Tempo </p>\n          <Slider\n            min={0}\n            max={250}\n            step={1}\n            defaultValue={100}\n            value={this.state.targetBPM}\n            onChange={(value) => this.setState({ targetBPM: value })}\n            className=\"w-75\"\n          />\n        </Col>\n\n        <Col xs={12} className=\"py-2 d-flex align-center space-between\">\n          <p className=\"mb-0 mr-2 paragraph-font\"> Popularity </p>\n          <Slider\n            \n            min={0}\n            max={100}\n            step={1}\n            defaultValue={100}\n            value={this.state.targetPopularity}\n            onChange={(value) => this.setState({ targetPopularity: value })}\n            className=\"w-75\"\n          />\n        </Col>\n      </Row>\n    );\n  }\n\n  render() {\n    let { error } = this.state;\n\n    return (\n      <div>\n        <div className=\"w-100 text-left\">\n          <h3 className=\"sub-header-font\"> Generate Recommendations </h3>\n          <br />\n        </div>\n        <Form onSubmit={(data) => console.log(data)}>\n          {this.renderSeedTracksDropdown()}\n          {this.renderSeedArtistsDropdown()}\n          {this.renderAudioFeatureSliders()}\n        </Form>\n        <div className=\"w-100 text-right\">\n          <Button\n            className=\"pn-primary-button pn-button button-font text-right\"\n            onClick={this.handleRecommendationGeneration}\n          >\n            GENERATE TRACKS\n          </Button>\n        </div>\n       \n        <hr />\n        {error && (\n          <div className=\"text-center mt-3\">\n            <h5 className=\"p-3 lead text-danger\">\n              <i className=\"fa fa-exclamation-triangle\"></i> {error}\n            </h5>\n          </div>\n        )}\n        {!error && (\n          <div className=\"mt-3\">\n            <TrackTable\n              playlistId={this.props.playlistId}\n              tracks={this.state.recommendedTracks}\n              updateCallback={this.updateSelectedPlaylist}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\n/**\n * Maps the spotify api to the props of the recommendations component so that\n * we can use it to find recommendations.\n *\n * @param {*} state The incoming redux state\n */\nconst mapStateToProps = (state) => {\n  return {\n    api: state.api.spotifyApi,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setSelectedPlaylist: (playlistId, spotifyApi) =>\n      dispatch(setSelectedPlaylist(playlistId, spotifyApi)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Recommendations);\n","import React, { Component } from \"react\";\nimport { Col } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport Spacer from \"../../common/components/Spacer\";\nimport PlaylistInfo from \"./subcomponents/PlaylistInfo\";\nimport \"./playlist-builder.css\";\nimport PlaylistTrackStatistics from \"./subcomponents/PlaylistTrackStatistics\";\nimport TrackTable from \"./subcomponents/TrackTable\";\nimport PlaylistTracklist from \"./subcomponents/PlaylistTracklist\";\nimport Recommendations from \"./subcomponents/Recommendations\";\n\nclass PlaylistBuilder extends Component {\n  render() {\n    let { selectedPlaylist, api } = this.props;\n\n    if (!selectedPlaylist) {\n      return (\n        <div id=\"playlist-builder-wrapper\" className=\"p-4\">\n          <Col xs={12}>\n            <Spacer percentage={5} />\n            <div className=\"w-100 h-100 no-selected-playlist\">\n              <h1 className=\"large-header-font\"> No playlist selected... </h1>\n              <p className=\"paragraph-font mt-4\">\n                Please{\" \"}\n                <a href=\"#/profile\">select a playlist from your profile</a> to\n                begin editing.\n              </p>\n            </div>\n          </Col>\n        </div>\n      );\n    }\n\n    return (\n      <div id=\"playlist-builder-wrapper\" className=\"p-4\">\n        <PlaylistInfo playlist={selectedPlaylist} api={api} />\n        <Spacer percentage={5} />\n        <PlaylistTrackStatistics tracks={selectedPlaylist.tracks} api={api} />\n        <Spacer percentage={5} />\n        <PlaylistTracklist\n          tracks={selectedPlaylist.tracks}\n          playlistId={selectedPlaylist.id}\n        />\n        <Spacer percentage={5} />\n        <Recommendations\n          playlistTracks={selectedPlaylist.tracks}\n          playlistId={selectedPlaylist.id}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    api: state.api ? state.api.spotifyApi : null,\n    selectedPlaylist: state.playlist ? state.playlist.selectedPlaylist : null\n  };\n};\n\nexport default connect(mapStateToProps)(PlaylistBuilder);\n","import React, { Component } from 'react'\nimport \"./likert.css\"\n\nexport default class LikertScaleInput extends Component {\n  render() {\n    return (\n      <div>\n        <ul className='likert'>\n          <li>\n            <input type=\"radio\" name={`question-${this.props.questionNumber}--likert`} value=\"0\" onInput={this.props.updateQuestionChoice}/>\n            <label>Strongly disagree</label>\n          </li>\n          <li>\n            <input type=\"radio\" name={`question-${this.props.questionNumber}--likert`} value=\"1\" onInput={this.props.updateQuestionChoice}/>\n          </li>\n          <li>\n            <input type=\"radio\" name={`question-${this.props.questionNumber}--likert`} value=\"2\" onInput={this.props.updateQuestionChoice}/>\n            <label>Neutral</label>\n          </li>\n          <li>\n            <input type=\"radio\" name={`question-${this.props.questionNumber}--likert`} value=\"3\" onInput={this.props.updateQuestionChoice}/>\n          </li>\n          <li>\n            <input type=\"radio\" name={`question-${this.props.questionNumber}--likert`} value=\"4\" onInput={this.props.updateQuestionChoice} />\n            <label>Strongly agree</label>\n          </li>\n        </ul>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport LikertScaleInput from './LikertScaleInput'\n\nexport default class Question extends Component {\n  constructor(props) {\n    super(props);\n\n\n  }\n\n\n  updateQuestionResult(event) {\n    let value = Number(event.target.value)\n    this.props.updateQuestionResult(this.props.index, value)\n  }\n\n\n  render() {\n    return (\n      <div>\n        <p className=\"text-center\"><strong>{this.props.text}</strong></p>\n        <LikertScaleInput questionNumber={this.props.index} updateQuestionChoice={this.updateQuestionResult.bind(this)} />\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport { Button, Col } from 'react-bootstrap'\nimport { connect } from 'react-redux';\nimport Question from './subcomponents/Question'\nimport {REFLECTIVE_AND_COMPLEX_GENRES, INTENSE_AND_REBELLIOUS_GENRES, UPBEAT_AND_CONVENTIONAL_GENRES, ENERGETIC_AND_RHYTHMIC_GENRES} from './constants'\n\n\nlet questionCategories = {\n  INVOLVEMENT_LEVEL: \"involvement_level\",\n  COPING: \"coping\",\n  PERSONAL_IDENTITY: \"personal_identity\",\n  SOCIAL_IDENTITY: \"social_identity\",\n  MOOD_ENHANCEMENT: \"mood_enhancement\"\n}\n\n\n\n\n\nclass MutualMelodiesPreferenceQuiz extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: \"\",\n      preferenceCode: \"\",\n      questions: [\n        {\n          text: \"With music I feel less lonely when alone\",\n          category: questionCategories.COPING,\n        },\n        {\n          text: \"Music creates a good atmosphere when with others\",\n          category: questionCategories.MOOD_ENHANCEMENT,\n        },\n        {\n          text: \"I recognize myself in the lyrics of my favourite artists\",\n          category: questionCategories.PERSONAL_IDENTITY,\n        },\n        {\n          text: \"I influence my friends with my music taste\",\n          category: questionCategories.INVOLVEMENT_LEVEL,\n        },\n        {\n          text: \"My friends have the same music taste as I do\",\n          category: questionCategories.SOCIAL_IDENTITY,\n        },\n        {\n          text: \"Can’t live without music\",\n          category: questionCategories.INVOLVEMENT_LEVEL,\n        },\n        {\n          text: \"Artists are an example to me\",\n          category: questionCategories.PERSONAL_IDENTITY,\n        },\n        {\n          text: \"Music makes other things less boring\",\n          category: questionCategories.MOOD_ENHANCEMENT,\n        },\n        {\n          text: \"With music I can vent aggression\",\n          category: questionCategories.COPING,\n        },\n        {\n          text: \"I find it important that my friends listen to the same music\",\n          category: questionCategories.SOCIAL_IDENTITY,\n        },\n        {\n          text: \"Lyrics of my music often express how I feel\",\n          category: questionCategories.PERSONAL_IDENTITY,\n        },\n        {\n          text: \"Music helps me get through my life\",\n          category: questionCategories.COPING,\n        },\n        {\n          text: \"My favourite artists have ideas that appeal to me\",\n          category: questionCategories.PERSONAL_IDENTITY,\n        },\n        {\n          text: \"Music helps against boredom\",\n          category: questionCategories.MOOD_ENHANCEMENT,\n        },\n        {\n          text: \"Music helps me to relax and stop thinking about things\",\n          category: questionCategories.MOOD_ENHANCEMENT,\n        },\n        {\n          text: \"I am always looking for new music\",\n          category: questionCategories.INVOLVEMENT_LEVEL,\n        },\n        {\n          text: \"I can’t be friends with someone who dislikes my music\",\n          category: questionCategories.SOCIAL_IDENTITY,\n        },\n        {\n          text: \"I always play music when I feel sad\",\n          category: questionCategories.COPING,\n        },\n        {\n          text: \"I know more than peers about music\",\n          category: questionCategories.INVOLVEMENT_LEVEL,\n        },\n      ]\n    }\n\n    this.updateQuizQuestionResult = this.updateQuizQuestionResult.bind(this)\n  }\n\n\n  updateQuizQuestionResult(index, value) {\n    let questions = [...this.state.questions]\n    let newQuestion = {\n      ...this.state.questions[index],\n      value: value\n    }\n\n    questions[index] = newQuestion;\n\n    this.setState({questions})\n  }\n\n\n  async getMusicDimensionScores() {\n    let topArtists = await this.props.api.getMyTopArtists({limit: 50, time_range: \"long_term\" })\n    let dimensionScores = {\n      RC: 0,\n      IR: 0,\n      UC: 0,      \n      ER: 0 \n    }\n\n    topArtists.body.items.forEach((artist) => {\n      for (let i = 0; i < artist.genres.length; i++) {\n        let genre = artist.genres[i];\n\n        if (genre.indexOf(\"jazz\") !== -1 || genre.indexOf(\"blues\") !== -1 || genre.indexOf(\"classical\") !== -1 || \n            genre.indexOf(\"folk\") !== -1) {\n          dimensionScores.RC++;\n        } else if (genre.indexOf(\"rock\") !== -1 || genre.indexOf(\"alt\") !== -1 || genre.indexOf(\"metal\") !== -1) {\n          dimensionScores.IR++;\n        } else if (genre.indexOf(\"country\") !== -1 || genre.indexOf(\"soundtracks\") !== -1 || genre.indexOf(\"pop\") !== -1 || \n                   genre.indexOf(\"gospel\") !== -1) {\n          dimensionScores.UC++;\n        } else if (genre.indexOf(\"rap\") !== -1 || genre.indexOf(\"hip hop\") !== -1 || genre.indexOf(\"soul\") !== -1 || \n                   genre.indexOf(\"funk\") !== -1 || genre.indexOf(\"edm\") !== -1 || genre.indexOf(\"electronic\") !== -1 || \n                   genre.indexOf(\"dance\") !== -1 || genre.indexOf(\"house\") !== -1 || genre.indexOf(\"techno\") !== -1) {\n          dimensionScores.ER++;\n        }\n      }\n    })\n\n    let highestScoringKey = Object.keys(dimensionScores).reduce(function (prev, key) {\n      if (!prev) {\n        return key\n      } else if (dimensionScores[key] > dimensionScores[prev]) {\n        return key\n      } else {\n        return prev\n      }\n    }, null)\n\n    return {\n      highestDimension: highestScoringKey,\n      ...dimensionScores\n    }\n  }\n\n\n\n\n  async calculateMusicPreferenceCode() {\n\n    if (this.state.questions.some((question) => { return question.value == null })) {\n      this.setState({error: \"Must complete all the questions.\"})\n      return\n    } else {\n      this.setState({error: \"\"})\n    }\n\n\n    \n    let scoredMusicUseCases = this.getSortedMusicUseAverages()\n    let involvementLevelCode = this.getInvolvementLevelScore();\n\n    let genreDataScore = await this.getMusicDimensionScores()\n\n    this.setState({preferenceCode: `${involvementLevelCode}-${scoredMusicUseCases[0].code}${scoredMusicUseCases[1].code}-${genreDataScore.highestDimension}`})\n    window.scrollTo({top: 0, left: 0, behavior: \"smooth\"})\n    document.getElementById('code-explanation').classList.remove('d-none')\n  }\n\n\n  getInvolvementLevelScore() {\n    let involvementQuestions = this.state.questions.filter((question) => question.category == questionCategories.INVOLVEMENT_LEVEL)\n    let involvementAvg = (involvementQuestions.reduce((total, question) => { return total + question.value }, 0)) / involvementQuestions.length\n\n    if (involvementAvg < 1) {\n      return \"L\"\n    } else if (involvementAvg < 3) {\n      return \"M\"\n    } else {\n      return \"H\"\n    }\n  }\n\n  getSortedMusicUseAverages() {\n    let copingQuestions = this.state.questions.filter((question) => question.category == questionCategories.COPING)\n    let moodEnhancementQuestions = this.state.questions.filter((question) => question.category == questionCategories.MOOD_ENHANCEMENT)\n    let socialIdentityQuestions = this.state.questions.filter((question) => question.category == questionCategories.SOCIAL_IDENTITY)\n    let personalIdentityQuestions = this.state.questions.filter((question) => question.category == questionCategories.PERSONAL_IDENTITY)\n\n    let copingAvg = (copingQuestions.reduce((total, question) => { return total + question.value }, 0)) / copingQuestions.length\n    let moodEnhancementAvg = (moodEnhancementQuestions.reduce((total, question) => { return total + question.value }, 0)) / moodEnhancementQuestions.length\n    let socialIdentityAvg = (socialIdentityQuestions.reduce((total, question) => { return total + question.value }, 0)) / socialIdentityQuestions.length\n    let personalIdentityAvg = (personalIdentityQuestions.reduce((total, question) => { return total + question.value }, 0)) / personalIdentityQuestions.length\n\n    let musicUseAverages = [{ \n        \"code\": \"Co\",\n        \"category\": questionCategories.COPING, \n        \"avg\": copingAvg \n      }, {\n        \"code\": \"Me\",\n        \"category\": questionCategories.MOOD_ENHANCEMENT, \n        \"avg\": moodEnhancementAvg \n      }, {\n        \"code\": \"Si\",\n        \"category\": questionCategories.SOCIAL_IDENTITY, \n        \"avg\": socialIdentityAvg \n      }, {\n        \"code\": \"Pi\",\n        \"category\": questionCategories.PERSONAL_IDENTITY, \n        \"avg\": personalIdentityAvg \n      } ].sort((a, b) => { return b.avg - a.avg; })\n\n    return musicUseAverages\n  } \n\n\n  render() {\n    return (\n      <Col xs={12} className=\"mt-5\">\n\n      <div className=\"mb-5\">\n        <h3> Mutual Melodies Music Preference Quiz </h3>\n        <p>\n          This quiz is designed to give you an understanding of your music listening preference and the different components of it. \n          The quiz determines the kind of music you listen to using the data we get from your Spotify account, and the reasons for your music listening habits by using the answers to the questions below.\n          When completed, we return a code that represents the configuration of your music taste, and then you can find people with similar music listening preferences.\n        </p>\n\n      </div>\n\n      <div className=\"text-center my-5\">\n        <h1>{this.state.preferenceCode}</h1>\n      </div>\n\n      <div>\n        <ul id=\"code-explanation\" className=\"d-none\">\n          <li> \n            <p className=\"mb-0\"><strong>First Section: Involvement Level</strong></p>\n            <p >This first section measures how important music is to you and how involved you are. The options are H,M & L (High, Medium, & Low).</p>\n          </li>\n          <li> \n          <p className=\"mb-0\"><strong>Second Section: 2 Main Usages for Music Listening.</strong></p>\n          <p>This second section shows you your main uses for music, based on your quiz respones. The options are:</p>\n          <ul>\n            <li>\n              <p className=\"mb-0\"><strong>Coping (Co)</strong></p>\n              <p>You use music to manage and cope with your emotions, almost like a tool.</p>\n            </li>\n            <li>\n              <p className=\"mb-0\"><strong>Mood Enhancement (Me)</strong></p>\n              <p>Similar to coping, you use music as a tool to manage your moods while doing other things, like homework.</p>\n            </li>\n            <li>\n              <p className=\"mb-0\"><strong>Personal Identity (Pi)</strong></p>\n              <p>You use music to make an identity for yourself, and you see yourself in the music you listen to.</p>\n            </li>\n            <li>\n              <p className=\"mb-0\"><strong>Social Identity (Si)</strong></p>\n              <p>You use music to create your social identity among your peers.</p>\n            </li>\n          </ul>\n          </li>\n          <li> \n          <p className=\"mb-0\"><strong>Third Section: Most Prominent Music Dimension</strong></p>\n          <p>\n            This last section shows you the music dimension that your music falls into. \n            We use these dimensions, as they represent a few different genres that you may \n            listen to as opposed to a specific sone. The options are:\n          </p>\n          <ul>\n            <li>\n              <p className=\"mb-0\"><strong>Reflective and Complex (RC)</strong></p>\n              <p>This dimension includes genres like blues, jazz, classical, & folk music.</p>\n            </li>\n            <li>\n              <p className=\"mb-0\"><strong>Intense and Rebellious (IR)</strong></p>\n              <p>This dimension includes genres like rock, alternative, & heavy metal.</p>\n            </li>\n            <li>\n              <p className=\"mb-0\"><strong>Upbeat and Conventional (UC)</strong></p>\n              <p>This dimension includes genres like country, soundtracks, religious, & pop music</p>\n            </li>\n            <li>\n              <p className=\"mb-0\"><strong>Energetic and Rhythmic (ER)</strong></p>\n              <p>This dimension includes genres like rap/hip-hop, soul/funk, & electronic/dance music.</p>\n            </li>\n          </ul>\n          </li>\n        </ul>\n      </div>\n        \n      <div className=\"mt-5\">\n        {this.state.questions.map((question, index) => {\n          return <Question \n                    id={`question--${index}`} \n                    index={index} \n                    key={index} \n                    text={question.text} \n                    category={question.category} \n                    updateQuestionResult={this.updateQuizQuestionResult}\n                  />\n        })}\n      </div>\n       \n      <div className=\"d-flex mb-5\">\n      <Button\n          className=\"pn-primary-button\"\n          onClick={this.calculateMusicPreferenceCode.bind(this)}\n        >GENERATE PREFERENCE CODE</Button>\n          <h5 className=\"text-danger\">{this.state.error}</h5>\n      </div>\n          \n      </Col>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    api: state.api ? state.api.spotifyApi : null\n  };\n};\n\nexport default connect(mapStateToProps)(MutualMelodiesPreferenceQuiz)","import React from \"react\";\nimport { HashRouter, Route } from \"react-router-dom\";\nimport LoginPage from \"./modules/spotify-sign-in/LoginPage\";\nimport SpotifyLogoutButton from \"./modules/spotify-sign-in/SpotifyLogoutButton\";\nimport { getCookie } from \"./common/constants\";\nimport \"./App.css\";\nimport Navbar from \"./common/components/Navbar\";\nimport { connect } from \"react-redux\";\nimport { setSpotifyApiAction } from \"./redux/actions/apiActions\";\nimport Profile from \"./modules/profile/Profile\";\nimport PlaylistBuilder from \"./modules/playlist-builder/PlaylistBuilder\";\nimport { Container, Row } from \"react-bootstrap\";\nimport autoBind from \"react-autobind\";\nimport MutualMelodiesPreferenceQuiz from \"./modules/mutual-melodies-preference-quiz/MutualMelodiesPreferenceQuiz\";\n\nimport './common/typography.css'\nimport './common/utilities.css'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loggedIn: false,\n      token: \"\",\n    };\n\n    autoBind(this);\n  }\n\n  componentDidMount() {\n    // Add an event listener to update the App component\n    // when the hash link changes. This is to check if the cookie is expired or not.\n    const scrollFunction = function () {\n      window.scrollTo(0, 0);\n    };\n\n    window.addEventListener(\"hashchange\", scrollFunction);\n    window.addEventListener(\"beforeunload\", scrollFunction);\n\n    window.addEventListener(\"hashchange\", () => {\n      this.checkForLogin();\n    });\n\n    this.checkForLogin();\n  }\n\n  checkForLogin() {\n    let token = getCookie(\"spotifyAccessToken\");\n\n    if (token !== \"\" && token != this.state.token) {\n      this.setState({ loggedIn: true, token: token });\n      this.props.setSpotifyApi(token);\n    } else if (token === \"\") {\n      this.setState({ loggedIn: false, token: \"\" });\n    }\n  }\n\n  render() {\n    let { loggedIn } = this.state;\n\n    return (\n      <HashRouter>\n        <div className=\"\" id=\"app-wrapper\">\n          <Navbar noButtons={!loggedIn} />\n\n          {loggedIn ? (\n            <div id=\"playlists-view-wrapper\">\n              <Container>\n                <Row>\n                  <Route exact path=\"(|/profile)\" component={Profile} />\n                  <Route\n                    exact\n                    path=\"/playlist-builder\"\n                    component={PlaylistBuilder}\n                  />\n                  <Route exact path=\"/music-preference-quiz\" component={MutualMelodiesPreferenceQuiz} />\n                </Row>\n              </Container>\n            </div>\n          ) : (\n            <Container>\n              <LoginPage />\n            </Container>\n          )}\n        </div>\n      </HashRouter>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setSpotifyApi: (accessToken) => dispatch(setSpotifyApiAction(accessToken)),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(App);\n","import SpotifyWebApi from \"spotify-web-api-node\";\nimport { clientID, redirectURI } from \"../../common/constants\";\n\nexport const setSpotifyApiAction = accessToken => dispatch => {\n  let spotifyApi = new SpotifyWebApi({\n    clientId: clientID,\n    redirectUri: redirectURI\n  });\n\n  spotifyApi.setAccessToken(accessToken);\n\n  dispatch({\n    type: \"SET_SPOTIFY_API\",\n    payload: spotifyApi\n  });\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineReducers } from \"redux\";\nimport apiReducer from \"./apiReducer\";\nimport playlistReducer from \"./playlistReducer\";\n\nexport default combineReducers({\n  api: apiReducer,\n  playlist: playlistReducer\n});\n","export default (state = {}, action) => {\n  switch (action.type) {\n    case \"SET_SPOTIFY_API\":\n      return {\n        ...state,\n        spotifyApi: action.payload\n      };\n    default:\n      return state;\n  }\n};\n","export default (state = {}, action) => {\n  switch (action.type) {\n    case \"SET_SELECTED_PLAYLIST\":\n      return {\n        ...state,\n        selectedPlaylist: action.payload\n      };\n    case \"LOAD_EDITABLE_PLAYLISTS\":\n      return {\n        ...state,\n        editablePlaylists: action.payload\n      };\n    default:\n      return state;\n  }\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./common/slider.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport configureStore from \"./store\";\n\nReactDOM.render(\n  <Provider\n    store={configureStore({ api: null, playlist: { editablePlaylists: [] } })}\n  >\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport rootReducer from \"./redux/reducers/rootReducer\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\n\n/*\n * src/store.js\n * With initialState\n */\nexport default function configureStore(initialState = {}) {\n  return createStore(\n    rootReducer,\n    initialState,\n    composeWithDevTools(applyMiddleware(thunk))\n  );\n}\n"],"sourceRoot":""}