(this["webpackJsonpspotify-playlist-builder"]=this["webpackJsonpspotify-playlist-builder"]||[]).push([[0],{115:function(e,t,a){e.exports=a(218)},120:function(e,t,a){},121:function(e,t,a){},135:function(e,t,a){},142:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),s=a.n(i),c=(a(120),a(121),a(9)),l=a(10),o=a(22),u=a(12),m=a(11),d=a(52),p=a(18),f=a(6),h=a.n(f),y=a(21),E=a(104),g=a.n(E),v=a(105),b=a.n(v),N="90a54f792a9e4fff94eec8d0c0075bd0";function k(e,t,a){var n=new Date;n.setTime(n.getTime()+60*a*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}function O(e){return null===e?null:e instanceof Array?(e.forEach((function(t,a){e[a]=O(t)})),e):e instanceof Object?(Object.keys(e).forEach((function(t){e[t]=O(e[t])})),b()(e)):e}var w=a(24),j=a.n(w),S=(a(85),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),n=t.call(this,e),j()(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"handleAccessToken",value:function(){var e=Object(y.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.access_token,e.next=3,k("spotifyAccessToken",a,1);case 3:document.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(g.a,{buttonText:"Log in with Spotify",clientId:N,redirectUri:"https://playlistninja.app",onSuccess:this.handleAccessToken,onFailure:function(e){return console.log(e)},scope:"user-top-read user-library-read playlist-modify-public playlist-read-private playlist-read-collaborative user-read-email playlist-modify-private streaming",id:"login-button",className:"log-in-button"})}}]),a}(n.Component)),T=function(){return r.a.createElement("div",{id:"logged-out-wrapper"},r.a.createElement("img",{id:"ninja-image",src:"/assets/playlistninja-login.png"}),r.a.createElement("span",{className:"pn-logo-text"},"playlistninja.app"),r.a.createElement("div",{id:"login-page-text"},r.a.createElement("h1",{id:"sign-in-header"},"More control over Spotify recommendations."),r.a.createElement("p",{id:"sign-in-subtext"},"Finding new music for your playlists just got a lot easier, with more customization over the recommendation algorithm on Spotify."),r.a.createElement(S,null)),r.a.createElement("div",{id:"links-container"},r.a.createElement("span",null,"Twitter"),r.a.createElement("span",null,"Discord")))},x=a(223),I=(n.Component,a(135),a(16)),P=a(17),C=a(19),_=a.n(C),A=(a(142),a(108)),M=a.n(A),L=function(e){return function(t){t({type:"SET_USER_ID",payload:e})}},D=Object(P.b)((function(e){return{api:e.api}}),(function(e){return{setUserIdInRedux:function(t){e(L(t))}}}))((function(e){var t=e.api,a=e.setUserIdInRedux,i=Object(n.useState)({}),s=Object(I.a)(i,2),c=s[0],l=s[1],o=Object(n.useState)({}),u=Object(I.a)(o,2),m=(u[0],u[1]);return Object(n.useEffect)((function(){t.spotifyApi.getMe().then((function(e){var t=O(e.body);l(t),a(t.id)}),(function(e){m(O(e))}))}),[t.spotifyApi,a]),c.images&&c.displayName?r.a.createElement("div",null,r.a.createElement("div",{className:"main-app-nav"},r.a.createElement("span",{className:"nav-app-name"},"playlistninja.app"),r.a.createElement("div",{className:"nav-right-container"},r.a.createElement(d.b,{to:"/playlist-builder",activeClassName:"nav-link-active"},r.a.createElement("span",{className:"nav-right-link"},"Edit Playlist")),r.a.createElement(d.b,{to:"/profile",activeClassName:"nav-link-active"},r.a.createElement("span",{className:"nav-right-link"},"My Profile")),r.a.createElement("div",{className:"nav-right-logged-in-user"},r.a.createElement("img",{className:"spotify-account-pic",width:25,height:25,src:c.images.length>0?c.images[0].url:null}),r.a.createElement("span",{className:"nav-right-username"},c.displayName),r.a.createElement(_.a,{className:"logout-button",icon:"x",width:16,height:16,onClick:function(){k("spotifyAccessToken","",0),document.location.reload()}})))),r.a.createElement("div",{className:"main-app-nav-ghost"})):null})),R=(a(155),function(e,t){return function(){var a=Object(y.a)(h.a.mark((function a(n){var r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=null,a.next=3,t.getPlaylist(e).then(function(){var a=Object(y.a)(h.a.mark((function a(n){var i,s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=n.body,i=r.tracks.next,r.tracks=r.tracks.items,!i){a.next=10;break}s=100;case 5:if(!i){a.next=10;break}return a.next=8,t.getPlaylistTracks(e,{offset:s}).then((function(e){e.body.next||(i=!1),s+=100,r.tracks=r.tracks.concat(e.body.items)}));case 8:a.next=5;break;case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),(function(e){r=e})).then((function(){window.location.hash="#/playlist-builder"}));case 3:n({type:"SET_SELECTED_PLAYLIST",payload:r});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}),F=(a(156),Object(P.b)((function(e){return{api:e.api.spotifyApi,playlists:e.playlist.editablePlaylists}}),(function(e){return{loadEditablePlaylists:function(t,a){return e(function(e,t){return function(){var a=Object(y.a)(h.a.mark((function a(n){var r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=null,a.next=3,t.getUserPlaylists(e,{limit:50}).then(function(){var a=Object(y.a)(h.a.mark((function a(n){var i,s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=n.body.items,!(i=n.body.next)){a.next=9;break}s=50;case 4:if(!i){a.next=9;break}return a.next=7,t.getUserPlaylists(e,{limit:50,offset:s}).then((function(e){e.body.next||(i=!1),s+=50,r=r.concat(e.body.items)}));case 7:a.next=4;break;case 9:r=r.filter((function(t){return t.owner.id==e||t.collaborative}));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),(function(e){r=e}));case 3:n({type:"LOAD_EDITABLE_PLAYLISTS",payload:r});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,a))},updateSelectedPlaylist:function(t,a){return e(R(t,a))},setUserIdInRedux:function(t){e(L(t))}}}))((function(e){var t=e.title,a=e.userId,i=e.api,s=e.playlists,c=e.loadEditablePlaylists,l=e.updateSelectedPlaylist,o=e.setUserIdInRedux,u=Object(n.useState)(!0),m=Object(I.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(null),h=Object(I.a)(f,2),y=h[0],E=(h[1],Object(n.useState)(1)),g=Object(I.a)(E,2),v=g[0],b=g[1],N=Object(n.useState)(1),k=Object(I.a)(N,2),w=k[0],j=k[1];if(Object(n.useEffect)((function(){if(a)c(a,i);else{var e="";a||i.getMe().then((function(t){e=O(t.body).id,o(e)}))}}),[i,c,o,a]),Object(n.useEffect)((function(){0!==s.length&&(j(Math.ceil(s.length/11)),p(!1))}),[s]),y)return console.log(y),"Error";return r.a.createElement("div",{className:"playlists-container"},r.a.createElement("span",{className:"playlists-header"},t),r.a.createElement("div",{className:"playlists-nav-row"},!d&&r.a.createElement("div",{className:"playlists-pagination"},r.a.createElement(_.a,{width:16,height:16,icon:"chevron-left",onClick:1===v?null:function(){b(v-1)},className:"playlists-pagination-arrow ".concat(1===v?"disabled":"")}),"Page ",v," / ",w,r.a.createElement(_.a,{width:16,height:16,icon:"chevron-right",onClick:v===w?null:function(){b(v+1)},className:"playlists-pagination-arrow ".concat(v===w?"disabled":"")}))),r.a.createElement("div",{className:"card-style playlists-card"},!d&&function(){var e=11*(v-1),t=s.slice(e,e+11);return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement("div",{className:"playlist-row ".concat(t%2===1?"odd":"")},r.a.createElement("div",{className:"playlist-img-name"},r.a.createElement("img",{className:"playlist-image",width:60,height:60,src:e.images.length>0?e.images[0].url:"",alt:'"'.concat(e.name,'" Cover'),onError:function(e){var t=e.currentTarget;t.onerror=null,t.src="/assets/generic-image.png"}}),r.a.createElement("span",{className:"playlist-name"},e.name)),r.a.createElement("div",{className:"edit-button",onClick:function(){return l(e.id,i)}},r.a.createElement(_.a,{icon:"edit",width:16,height:16}),"Edit"))})))}(),d&&r.a.createElement("div",{className:"playlist-row"},"Loading...")))}))),V=(a(157),Object(P.b)((function(e){return{api:e.api.spotifyApi}}))((function(e){var t=e.api,a=Object(n.useState)([]),i=Object(I.a)(a,2),s=i[0],c=i[1],l=Object(n.useState)([]),o=Object(I.a)(l,2),u=o[0],m=o[1],d=Object(n.useState)([]),p=Object(I.a)(d,2),f=p[0],h=p[1],y=Object(n.useState)("short_term"),E=Object(I.a)(y,2),g=E[0],v=E[1],b=Object(n.useState)(null),N=Object(I.a)(b,2),k=N[0],O=N[1];Object(n.useEffect)((function(){t.getMyTopArtists({limit:5,time_range:"short_term"}).then((function(e){c(e.body.items)}),(function(e){O(e)})),t.getMyTopArtists({limit:5,time_range:"medium_term"}).then((function(e){m(e.body.items)}),(function(e){O(e)})),t.getMyTopArtists({limit:5,time_range:"long_term"}).then((function(e){h(e.body.items)}),(function(e){O(e)}))}),[t]);return r.a.createElement("div",{className:"top-artists-container"},r.a.createElement("span",{className:"top-artists-header"},"Top Artists"),r.a.createElement("div",{className:"top-artists-button-row"},r.a.createElement("div",{className:"top-artists-button ".concat("short_term"===g?"active":""),onClick:function(){v("short_term")}},"4 Weeks"),r.a.createElement("div",{className:"top-artists-button ".concat("medium_term"===g?"active":""),onClick:function(){v("medium_term")}},"6 Months"),r.a.createElement("div",{className:"top-artists-button ".concat("long_term"===g?"active":""),onClick:function(){v("long_term")}},"All Time")),r.a.createElement("div",{className:"card-style top-artists-card"},function(){var e=function(e){return r.a.createElement("div",{className:"artist-row"},r.a.createElement("img",{className:"top-artist-image",width:40,height:40,src:e.images.length>0?e.images[0].url:""}),r.a.createElement("span",{className:"artist-name"},e.name))};return k?"Error loading top artists.":s&&u&&f?"short_term"===g?r.a.createElement(r.a.Fragment,null,s.map((function(t){return e(t)}))):"medium_term"===g?r.a.createElement(r.a.Fragment,null,u.map((function(t){return e(t)}))):"long_term"===g?r.a.createElement(r.a.Fragment,null,f.map((function(t){return e(t)}))):void 0:"Loading..."}()))}))),q=(a(158),Object(P.b)((function(e){return{api:e.api.spotifyApi}}))((function(e){var t=e.api,a=Object(n.useState)([]),i=Object(I.a)(a,2),s=i[0],c=i[1],l=Object(n.useState)([]),o=Object(I.a)(l,2),u=o[0],m=o[1],d=Object(n.useState)([]),p=Object(I.a)(d,2),f=p[0],h=p[1],y=Object(n.useState)("short_term"),E=Object(I.a)(y,2),g=E[0],v=E[1],b=Object(n.useState)(null),N=Object(I.a)(b,2),k=N[0],O=N[1];Object(n.useEffect)((function(){t.getMyTopTracks({limit:5,time_range:"short_term"}).then((function(e){c(e.body.items)}),(function(e){O(e)})),t.getMyTopTracks({limit:5,time_range:"medium_term"}).then((function(e){m(e.body.items)}),(function(e){O(e)})),t.getMyTopTracks({limit:5,time_range:"long_term"}).then((function(e){h(e.body.items)}),(function(e){O(e)}))}),[t]);return r.a.createElement("div",{className:"top-tracks-container"},r.a.createElement("span",{className:"top-tracks-header"},"Top Tracks"),r.a.createElement("div",{className:"top-tracks-button-row"},r.a.createElement("div",{className:"top-tracks-button ".concat("short_term"===g?"active":""),onClick:function(){v("short_term")}},"4 Weeks"),r.a.createElement("div",{className:"top-tracks-button ".concat("medium_term"===g?"active":""),onClick:function(){v("medium_term")}},"6 Months"),r.a.createElement("div",{className:"top-tracks-button ".concat("long_term"===g?"active":""),onClick:function(){v("long_term")}},"All Time")),r.a.createElement("div",{className:"card-style top-tracks-card"},function(){var e=function(e){return r.a.createElement("div",{className:"top-track-row"},r.a.createElement("img",{className:"top-track-image",width:40,height:40,src:e.album.images.length>0?e.album.images[0].url:""}),r.a.createElement("span",{className:"top-track-name"},e.name))};return k?"Error loading top tracks.":s&&u&&f?"short_term"===g?r.a.createElement(r.a.Fragment,null,s.map((function(t){return e(t)}))):"medium_term"===g?r.a.createElement(r.a.Fragment,null,u.map((function(t){return e(t)}))):"long_term"===g?r.a.createElement(r.a.Fragment,null,f.map((function(t){return e(t)}))):void 0:"Loading..."}()))}))),Y=a(219),U=a(220),Q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={profile:null,error:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.api.spotifyApi.getMe().then((function(t){e.setState({profile:O(t.body)})}),(function(t){e.setState({error:O(t)})})),this.forceUpdate()}},{key:"render",value:function(){var e=this.state.profile;return e?r.a.createElement("div",{className:"profile-wrapper"},r.a.createElement("span",{className:"profile-header"},"My Profile"),r.a.createElement(Y.a,null,r.a.createElement(U.a,{xs:7},r.a.createElement(F,{title:"My Playlists",userId:e.id})),r.a.createElement(U.a,{xs:5,className:"top-tracks-artists-col"},r.a.createElement(V,null),r.a.createElement(q,null)))):null}}]),a}(n.Component),z=Object(P.b)((function(e){return{api:e.api}}))(Q),B=(n.Component,a(89),a(221)),G=(n.Component,a(90),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).renderTrackRow=function(e,t){return r.a.createElement("div",{className:"track-row ".concat(t%2===1?"odd":"")},r.a.createElement("div",{className:"track-row-image-title"},e.album.images[0]&&r.a.createElement(B.a,{width:60,height:60,src:e.album.images[0].url,className:"track-table-image"}),r.a.createElement("span",{className:"track-name"},e.name)),r.a.createElement("div",{className:"track-row-actions"},r.a.createElement("div",{className:"play-button",onClick:n.handlePlayTrackOnSpotify(e.id)},r.a.createElement(_.a,{icon:"play",width:16,height:16})),n.props.tracksInPlaylist?r.a.createElement("div",{className:"trash-button",onClick:n.handleRemoveTrackFromPlaylist(e.id)},r.a.createElement(_.a,{icon:"trash-2",width:16,height:16})):r.a.createElement("div",{className:"plus-button",onClick:n.handleAddTrackToPlaylist(e.id)},r.a.createElement(_.a,{icon:"plus",width:16,height:16}))))},j()(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"handlePlayTrackOnSpotify",value:function(e){var t=this;return function(){var a=t.props,n=a.api,r=a.playlistId;a.tracksInPlaylist?n.play({context_uri:"spotify:playlist:".concat(r),offset:{uri:"spotify:track:".concat(e)}}).then((function(e){}),(function(e){console.error(e)})):n.play({uris:["spotify:track:".concat(e)]}).then((function(e){}),(function(e){console.error(e)}))}}},{key:"handleAddTrackToPlaylist",value:function(e){var t=this;return function(){var a=t.props,n=a.playlistId,r=a.api;r.addTracksToPlaylist(n,["spotify:track:".concat(e)]).then(function(){var e=Object(y.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(n,r);case 2:t.props.updateCallback&&t.props.updateCallback();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.error(e)}))}}},{key:"handleRemoveTrackFromPlaylist",value:function(e){var t=this;return function(){var a=t.props,n=a.playlistId,r=a.api,i=a.setSelectedPlaylist;r.removeTracksFromPlaylist(n,[{uri:"spotify:track:".concat(e)}]).then(function(){var e=Object(y.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(n,r);case 2:t.props.updateCallback&&t.props.updateCallback();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.error(e)}))}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.tracks.map((function(t,a){return e.renderTrackRow(t,a)})))}}]),a}(n.Component)),H=Object(P.b)((function(e){return{api:e.api.spotifyApi}}),(function(e){return{setSelectedPlaylist:function(t,a){return e(R(t,a))}}}))(G),W=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).numberPerPage=8,n.renderPaginationButton=function(){return r.a.createElement("div",{className:"tracklist-pagination"},r.a.createElement(_.a,{width:16,height:16,icon:"chevron-left",onClick:1===n.state.currentPage?null:n.changeCurrentPageHandler(n.state.currentPage-1),className:"tracklist-pagination-arrow ".concat(1===n.state.currentPage?"disabled":"")}),"Page ",n.state.currentPage," / ",n.state.numPages,r.a.createElement(_.a,{width:16,height:16,icon:"chevron-right",onClick:n.state.currentPage===n.state.numPages?null:n.changeCurrentPageHandler(n.state.currentPage+1),className:"tracklist-pagination-arrow ".concat(n.state.currentPage===n.state.numPages?"disabled":"")}))},n.renderSearchBar=function(){return r.a.createElement("div",{className:"tracklist-search"},r.a.createElement(_.a,{width:16,height:16,icon:"search"}),"Search")},n.renderSortDropdown=function(){return r.a.createElement("div",{className:"tracklist-sort"},"Sort",r.a.createElement(_.a,{width:16,height:16,icon:"chevron-down"}))},n.state={currentPage:1,numPages:Math.ceil(e.tracks.length/n.numberPerPage)},j()(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"changeCurrentPageHandler",value:function(e){var t=this;return function(){t.setState({currentPage:e})}}},{key:"render",value:function(){var e=this.state.currentPage,t=this.props.tracks.concat([]),a=(e-1)*this.numberPerPage,n=t.slice(a,a+this.numberPerPage).map((function(e){return e.track}));return r.a.createElement("div",{className:"tracklist-container"},r.a.createElement("span",{className:"tracklist-header"},"Track List"),r.a.createElement("div",{className:"tracklist-button-row"},this.renderPaginationButton()),r.a.createElement("div",{className:"card-style tracklist-card"},r.a.createElement(H,{tracks:n,tracksInPlaylist:!0,playlistId:this.props.playlistId})))}}]),a}(n.Component),J=a(53),$=a(20),K=a(46),X=(a(212),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={activeView:"input",recommendedTracks:[],selectedArtistSeeds:{0:"",1:"",2:""},selectedTrackSeeds:{0:"",1:"",2:""},targetValence:.5,targetEnergy:.5,targetDanceability:.5,targetBPM:100,targetPopularity:50,error:null},j()(Object(o.a)(n)),window.addEventListener("resize",(function(){n.forceUpdate()})),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.handleRecommendationGeneration()}},{key:"updateSelectedPlaylist",value:function(){var e=this.props,t=e.api,a=e.playlistId;(0,e.setSelectedPlaylist)(a,t)}},{key:"handleRecommendationGeneration",value:function(){var e=this.state,t=e.selectedArtistSeeds,a=e.selectedTrackSeeds,n=!1;Object.keys(t).forEach((function(e){""!==t[e]&&(n=!0)})),n||Object.keys(a).forEach((function(e){""!==a[e]&&(n=!0)})),n?this.updateRecommendations():this.setState({error:"You must choose at least one seed for recommendations."})}},{key:"updateRecommendations",value:function(){var e=this,t=this.props.api,a=this.state,n=a.selectedArtistSeeds,r=a.selectedTrackSeeds,i=a.targetValence,s=a.targetEnergy,c=a.targetDanceability,l=a.targetBPM,o=a.targetPopularity,u=[];Object.keys(n).forEach((function(e){""!==n[e]&&u.push(n[e])}));var m=[];Object.keys(r).forEach((function(e){""!==r[e]&&m.push(r[e])}));var d={limit:15,target_bpm:l,target_valence:i,target_energy:s,target_danceability:c,target_popularity:o,seed_artists:u,seed_tracks:m};t.getRecommendations(d).then((function(t){e.setState({recommendedTracks:t.body.tracks,error:null,activeView:"songs"})}),(function(t){e.setState({error:t.message,activeView:"songs"})}))}},{key:"numberOfSeedsFull",value:function(){var e=this.state,t=e.selectedArtistSeeds,a=e.selectedTrackSeeds,n=[],r=[];return[0,1,2].forEach((function(e){""!==t[e]&&n.push(t[e]),""!==a[e]&&r.push(a[e])})),n.length+r.length>=5}},{key:"handleAddSeedArtist",value:function(e){var t=this;return function(a){t.setState({selectedArtistSeeds:Object($.a)(Object($.a)({},t.state.selectedArtistSeeds),{},Object(J.a)({},e,a.target.value))})}}},{key:"renderSeedArtistsDropdown",value:function(){var e=this,t=this.props.playlistTracks,a={};t.forEach((function(e){e.track.artists.forEach((function(e){a[e.id]=e.name}))}));var n=Object.keys(a);return r.a.createElement("div",{className:"input-container"},r.a.createElement("span",{className:"input-label"},"Similar Artists (up to 3)"),r.a.createElement("div",{className:"dropdowns-container"},[1,2,3].map((function(t){var i=e.state.selectedArtistSeeds;return r.a.createElement("div",{className:"dropdown-container"},r.a.createElement("select",{key:t-1,as:"select",onChange:e.handleAddSeedArtist(t-1),disabled:""===i[t-1]&&e.numberOfSeedsFull(),className:"similar-dropdown"},r.a.createElement("option",{value:""},"None"),n.map((function(e){return r.a.createElement("option",{value:e},a[e])}))),r.a.createElement(_.a,{className:"dropdown-arrow",icon:"chevron-down",width:16,height:16}))}))))}},{key:"handleAddSeedTrack",value:function(e){var t=this;return function(a){t.setState({selectedTrackSeeds:Object($.a)(Object($.a)({},t.state.selectedTrackSeeds),{},Object(J.a)({},e,a.target.value))})}}},{key:"renderSeedTracksDropdown",value:function(){var e=this,t=this.props.playlistTracks,a={};t.forEach((function(e){var t=e.track;a[t.id]=t.name}));var n=Object.keys(a);return r.a.createElement("div",{className:"input-container"},r.a.createElement("span",{className:"input-label"},"Similar Artists (up to 3)"),r.a.createElement("div",{className:"dropdowns-container"},[1,2,3].map((function(t){var i=e.state.selectedTrackSeeds;return r.a.createElement("div",{className:"dropdown-container"},r.a.createElement("select",{key:t-1,as:"select",onChange:e.handleAddSeedTrack(t-1),disabled:""===i[t-1]&&e.numberOfSeedsFull(),className:"similar-dropdown"},r.a.createElement("option",{value:""},"None"),n.map((function(e){return r.a.createElement("option",{value:e},a[e])}))),r.a.createElement(_.a,{className:"dropdown-arrow",icon:"chevron-down",width:16,height:16}))}))))}},{key:"renderAudioFeatureSliders",value:function(){var e=this;return r.a.createElement("div",{className:"audio-feature-input"},r.a.createElement("div",{className:"input-container"},r.a.createElement("span",{className:"input-label"},"Target Danceability"),r.a.createElement(K.a,{min:0,max:100,step:1,defaultValue:50,value:100*this.state.targetDanceability,onChange:function(t){return e.setState({targetDanceability:t/100})},className:"audio-slider"})),r.a.createElement("div",{className:"input-container"},r.a.createElement("span",{className:"input-label"},"Target Energy"),r.a.createElement(K.a,{min:0,max:100,step:1,defaultValue:50,value:100*this.state.targetEnergy,onChange:function(t){return e.setState({targetEnergy:t/100})},className:"audio-slider"})),r.a.createElement("div",{className:"input-container"},r.a.createElement("span",{className:"input-label"},"Target Valence"),r.a.createElement(K.a,{min:0,max:100,step:1,defaultValue:50,value:100*this.state.targetValence,onChange:function(t){return e.setState({targetValence:t/100})},className:"audio-slider"})),r.a.createElement("div",{className:"input-container"},r.a.createElement("span",{className:"input-label"},"Target Tempo"),r.a.createElement(K.a,{min:0,max:250,step:1,defaultValue:100,value:this.state.targetBPM,onChange:function(t){return e.setState({targetBPM:t})},className:"audio-slider"})),r.a.createElement("div",{className:"input-container"},r.a.createElement("span",{className:"input-label"},"Target Popularity"),r.a.createElement(K.a,{min:0,max:100,step:1,defaultValue:100,value:this.state.targetPopularity,onChange:function(t){return e.setState({targetPopularity:t})},className:"audio-slider"})))}},{key:"render",value:function(){var e=this,t=this.state.error;return r.a.createElement("div",{className:"recommendations-container"},r.a.createElement("span",{className:"recommendations-header"},"Generate Recommendations"),r.a.createElement("div",{className:"recommendations-tab-row"},r.a.createElement("div",{className:"recommendations-tab ".concat("input"===this.state.activeView?"active":""),onClick:function(){e.setState({activeView:"input"})}},"Recommendations Input"),r.a.createElement("div",{className:"recommendations-tab ".concat("songs"===this.state.activeView?"active":""),onClick:function(){e.setState({activeView:"songs"})}},"Recommended Songs")),"input"===this.state.activeView&&r.a.createElement("div",{className:"recommendations-main-card card-style"},this.renderSeedTracksDropdown(),this.renderSeedArtistsDropdown(),this.renderAudioFeatureSliders(),r.a.createElement("div",{className:"recommendations-button",onClick:this.handleRecommendationGeneration},"Generate Recommendations")),"songs"===this.state.activeView&&r.a.createElement("div",{className:"card-style"},t&&r.a.createElement("div",{className:"text-center mt-2"},r.a.createElement("h5",{className:"p-3 lead text-danger"},r.a.createElement("i",{className:"fa fa-exclamation-triangle"})," ",t)),!t&&r.a.createElement(H,{playlistId:this.props.playlistId,tracks:this.state.recommendedTracks,updateCallback:this.updateSelectedPlaylist})))}}]),a}(n.Component)),Z=Object(P.b)((function(e){return{api:e.api.spotifyApi}}),(function(e){return{setSelectedPlaylist:function(t,a){return e(R(t,a))}}}))(X),ee=(a(213),function(e){var t=e.playlist,a=e.api,i=Object(n.useState)(!0),s=Object(I.a)(i,2),c=s[0],l=s[1],o=Object(n.useState)({}),u=Object(I.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)("song_information"),f=Object(I.a)(p,2),E=f[0],g=f[1];console.log(t);var v=Object(n.useCallback)(Object(y.a)(h.a.mark((function e(){var n,r,i,s,c,o,u,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.tracks,r={tempo:null,danceability:null,valence:null,energy:null,durationMs:null,popularity:null},i=[],n.forEach((function(e){i.push(e.track.id),r.popularity=r.popularity+e.track.popularity})),s=i.length>100,c=[],0===i.length){e.next=24;break}return e.next=9,a.getAudioFeaturesForTracks(i.splice(0,100)).then((function(e){var t=O(e.body);t.audioFeatures&&(c=c.concat(t.audioFeatures))}));case 9:if(!s){e.next=21;break}o=100;case 11:if(!s){e.next=21;break}return e.next=14,a.getAudioFeaturesForTracks(i.splice(0,100));case 14:u=e.sent,m=O(u.body),c=c.concat(m.audioFeatures),(o+=m.audioFeatures.length)===n.length&&(s=!1),e.next=11;break;case 21:c.forEach((function(e){null!==e&&(r.tempo=r.tempo+e.tempo,r.danceability=r.danceability+e.danceability,r.valence=r.valence+e.valence,r.energy=r.energy+e.energy,r.durationMs=r.durationMs+e.durationMs)})),d({tempo:r.tempo/n.length,danceability:r.danceability/n.length,valence:r.valence/n.length,energy:r.energy/n.length,durationMs:r.durationMs,popularity:r.popularity/n.length}),l(!1);case 24:case"end":return e.stop()}}),e)}))),[a,t]),b=function(e){return r.a.createElement("div",{className:"percentage-bar-container"},r.a.createElement("div",{className:"percent-full",style:{width:"".concat(e,"%")}}))};return Object(n.useEffect)((function(){v()}),[v]),c?"Loading...":(console.log(m),r.a.createElement("div",{className:"playlist-stats-container"},r.a.createElement("span",{className:"playlist-stats-header"},"Playlist Statistics"),r.a.createElement("div",{className:"playlist-stats-button-row"},r.a.createElement("div",{className:"playlist-stats-button ".concat("song_information"===E?"active":""),onClick:function(){g("song_information")}},"Song Information"),r.a.createElement("div",{className:"playlist-stats-button ".concat("playlist_information"===E?"active":""),onClick:function(){g("playlist_information")}},"Playlist Information")),r.a.createElement("div",{className:"playlist-stats-content card-style"},"song_information"===E?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"playlist-stats-row"},r.a.createElement("span",{className:"playlist-stats-label"},"Tempo"),r.a.createElement("span",{className:"playlist-stats-font"},Math.round(m.tempo)," BPM")),r.a.createElement("div",{className:"playlist-stats-row"},r.a.createElement("span",{className:"playlist-stats-label"},"Energy"),b(100*m.energy.toFixed(2))),r.a.createElement("div",{className:"playlist-stats-row"},r.a.createElement("span",{className:"playlist-stats-label"},"Danceability"),b(100*m.danceability.toFixed(2))),r.a.createElement("div",{className:"playlist-stats-row"},r.a.createElement("span",{className:"playlist-stats-label"},"Valence"),b(100*m.valence.toFixed(2))),r.a.createElement("div",{className:"playlist-stats-row"},r.a.createElement("span",{className:"playlist-stats-label"},"Average Song Popularity"),b(m.popularity.toFixed(0)))):function(){var e=function(e){var t=e/1e3,a=Math.floor(t/3600);return t%=3600,{hours:a,minutes:Math.floor(t/60)}}(Math.round(m.durationMs));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"playlist-stats-row"},r.a.createElement("span",{className:"playlist-stats-label"},"Owner"),r.a.createElement("span",{className:"playlist-stats-font"},t.owner.display_name)),r.a.createElement("div",{className:"playlist-stats-row"},r.a.createElement("span",{className:"playlist-stats-label"},"Duration"),r.a.createElement("span",{className:"playlist-stats-font"},e.hours>0?e.hours+" hours":""," ",e.minutes>0?e.minutes+" minutes":"")),r.a.createElement("div",{className:"playlist-stats-row"},r.a.createElement("span",{className:"playlist-stats-label"},"Followers"),r.a.createElement("span",{className:"playlist-stats-font"},t.followers.total," Followers")),r.a.createElement("div",{className:"playlist-stats-row"},r.a.createElement("span",{className:"playlist-stats-label"},"Visibility"),r.a.createElement("span",{className:"playlist-stats-font"},t.public?"Public":"Private")),r.a.createElement("div",{className:"playlist-stats-row"},r.a.createElement("span",{className:"playlist-stats-label"},"Collaborative"),r.a.createElement("span",{className:"playlist-stats-font"},t.collaborative?"Yes":"No")))}())))}),te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.selectedPlaylist,a=e.api,n=e.userId;return t?r.a.createElement("div",{id:"playlist-builder-wrapper"},r.a.createElement("span",{className:"edit-playlist-header"},"Edit Playlist"),r.a.createElement("div",{className:"playlist-info-card card-style"},r.a.createElement("img",{width:300,height:300,src:t.images.length>0?t.images[0].url:"",alt:'"'.concat(t.name,'" Cover'),onError:function(e){var t=e.currentTarget;t.onerror=null,t.src="/assets/generic-image.png"}}),r.a.createElement("div",{className:"playlist-info-card-inner"},r.a.createElement("div",{className:"playlist-info-card-name-desc"},r.a.createElement("span",{className:"playlist-info-card-name"},t.name),r.a.createElement("span",{className:"playlist-info-card-desc"},t.description||"No description provided.")))),r.a.createElement(Y.a,null,r.a.createElement(U.a,{xs:7},r.a.createElement(W,{tracks:t.tracks,playlistId:t.id})),r.a.createElement(U.a,{xs:5},r.a.createElement(ee,{playlist:t,api:a}))),r.a.createElement(Z,{playlistTracks:t.tracks,playlistId:t.id})):r.a.createElement("div",{id:"playlist-builder-wrapper"},r.a.createElement("span",{className:"edit-playlist-header"},"Edit Playlist"),r.a.createElement(F,{title:"Select a playlist to edit",userId:n}))}}]),a}(n.Component),ae=Object(P.b)((function(e){return{api:e.api?e.api.spotifyApi:null,selectedPlaylist:e.playlist?e.playlist.selectedPlaylist:null,userId:e.api?e.api.userId:null}}))(te),ne=a(222),re=a(114),ie=(a(214),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("ul",{className:"likert"},r.a.createElement("li",null,r.a.createElement("input",{type:"radio",name:"question-".concat(this.props.questionNumber,"--likert"),value:"0",onInput:this.props.updateQuestionChoice}),r.a.createElement("label",null,"Strongly disagree")),r.a.createElement("li",null,r.a.createElement("input",{type:"radio",name:"question-".concat(this.props.questionNumber,"--likert"),value:"1",onInput:this.props.updateQuestionChoice})),r.a.createElement("li",null,r.a.createElement("input",{type:"radio",name:"question-".concat(this.props.questionNumber,"--likert"),value:"2",onInput:this.props.updateQuestionChoice}),r.a.createElement("label",null,"Neutral")),r.a.createElement("li",null,r.a.createElement("input",{type:"radio",name:"question-".concat(this.props.questionNumber,"--likert"),value:"3",onInput:this.props.updateQuestionChoice})),r.a.createElement("li",null,r.a.createElement("input",{type:"radio",name:"question-".concat(this.props.questionNumber,"--likert"),value:"4",onInput:this.props.updateQuestionChoice}),r.a.createElement("label",null,"Strongly agree"))))}}]),a}(n.Component)),se=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"updateQuestionResult",value:function(e){var t=Number(e.target.value);this.props.updateQuestionResult(this.props.index,t)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{className:"text-center"},r.a.createElement("strong",null,this.props.text)),r.a.createElement(ie,{questionNumber:this.props.index,updateQuestionChoice:this.updateQuestionResult.bind(this)}))}}]),a}(n.Component),ce={INVOLVEMENT_LEVEL:"involvement_level",COPING:"coping",PERSONAL_IDENTITY:"personal_identity",SOCIAL_IDENTITY:"social_identity",MOOD_ENHANCEMENT:"mood_enhancement"},le=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={error:"",preferenceCode:"",questions:[{text:"With music I feel less lonely when alone",category:ce.COPING},{text:"Music creates a good atmosphere when with others",category:ce.MOOD_ENHANCEMENT},{text:"I recognize myself in the lyrics of my favourite artists",category:ce.PERSONAL_IDENTITY},{text:"I influence my friends with my music taste",category:ce.INVOLVEMENT_LEVEL},{text:"My friends have the same music taste as I do",category:ce.SOCIAL_IDENTITY},{text:"Can\u2019t live without music",category:ce.INVOLVEMENT_LEVEL},{text:"Artists are an example to me",category:ce.PERSONAL_IDENTITY},{text:"Music makes other things less boring",category:ce.MOOD_ENHANCEMENT},{text:"With music I can vent aggression",category:ce.COPING},{text:"I find it important that my friends listen to the same music",category:ce.SOCIAL_IDENTITY},{text:"Lyrics of my music often express how I feel",category:ce.PERSONAL_IDENTITY},{text:"Music helps me get through my life",category:ce.COPING},{text:"My favourite artists have ideas that appeal to me",category:ce.PERSONAL_IDENTITY},{text:"Music helps against boredom",category:ce.MOOD_ENHANCEMENT},{text:"Music helps me to relax and stop thinking about things",category:ce.MOOD_ENHANCEMENT},{text:"I am always looking for new music",category:ce.INVOLVEMENT_LEVEL},{text:"I can\u2019t be friends with someone who dislikes my music",category:ce.SOCIAL_IDENTITY},{text:"I always play music when I feel sad",category:ce.COPING},{text:"I know more than peers about music",category:ce.INVOLVEMENT_LEVEL}]},n.updateQuizQuestionResult=n.updateQuizQuestionResult.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"updateQuizQuestionResult",value:function(e,t){var a=Object(re.a)(this.state.questions),n=Object($.a)(Object($.a)({},this.state.questions[e]),{},{value:t});a[e]=n,this.setState({questions:a})}},{key:"getMusicDimensionScores",value:function(){var e=Object(y.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.getMyTopArtists({limit:50,time_range:"long_term"});case 2:return t=e.sent,a={RC:0,IR:0,UC:0,ER:0},t.body.items.forEach((function(e){for(var t=0;t<e.genres.length;t++){var n=e.genres[t];-1!==n.indexOf("jazz")||-1!==n.indexOf("blues")||-1!==n.indexOf("classical")||-1!==n.indexOf("folk")?a.RC++:-1!==n.indexOf("rock")||-1!==n.indexOf("alt")||-1!==n.indexOf("metal")?a.IR++:-1!==n.indexOf("country")||-1!==n.indexOf("soundtracks")||-1!==n.indexOf("pop")||-1!==n.indexOf("gospel")?a.UC++:-1===n.indexOf("rap")&&-1===n.indexOf("hip hop")&&-1===n.indexOf("soul")&&-1===n.indexOf("funk")&&-1===n.indexOf("edm")&&-1===n.indexOf("electronic")&&-1===n.indexOf("dance")&&-1===n.indexOf("house")&&-1===n.indexOf("techno")||a.ER++}})),n=Object.keys(a).reduce((function(e,t){return e?a[t]>a[e]?t:e:t}),null),e.abrupt("return",Object($.a)({highestDimension:n},a));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateMusicPreferenceCode",value:function(){var e=Object(y.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.questions.some((function(e){return null==e.value}))){e.next=5;break}return this.setState({error:"Must complete all the questions."}),e.abrupt("return");case 5:this.setState({error:""});case 6:return t=this.getSortedMusicUseAverages(),a=this.getInvolvementLevelScore(),e.next=10,this.getMusicDimensionScores();case 10:n=e.sent,this.setState({preferenceCode:"".concat(a,"-").concat(t[0].code).concat(t[1].code,"-").concat(n.highestDimension)}),window.scrollTo({top:0,left:0,behavior:"smooth"}),document.getElementById("code-explanation").classList.remove("d-none");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getInvolvementLevelScore",value:function(){var e=this.state.questions.filter((function(e){return e.category==ce.INVOLVEMENT_LEVEL})),t=e.reduce((function(e,t){return e+t.value}),0)/e.length;return t<1?"L":t<3?"M":"H"}},{key:"getSortedMusicUseAverages",value:function(){var e=this.state.questions.filter((function(e){return e.category==ce.COPING})),t=this.state.questions.filter((function(e){return e.category==ce.MOOD_ENHANCEMENT})),a=this.state.questions.filter((function(e){return e.category==ce.SOCIAL_IDENTITY})),n=this.state.questions.filter((function(e){return e.category==ce.PERSONAL_IDENTITY})),r=e.reduce((function(e,t){return e+t.value}),0)/e.length,i=t.reduce((function(e,t){return e+t.value}),0)/t.length,s=a.reduce((function(e,t){return e+t.value}),0)/a.length,c=n.reduce((function(e,t){return e+t.value}),0)/n.length;return[{code:"Co",category:ce.COPING,avg:r},{code:"Me",category:ce.MOOD_ENHANCEMENT,avg:i},{code:"Si",category:ce.SOCIAL_IDENTITY,avg:s},{code:"Pi",category:ce.PERSONAL_IDENTITY,avg:c}].sort((function(e,t){return t.avg-e.avg}))}},{key:"render",value:function(){var e=this;return r.a.createElement(U.a,{xs:12,className:"mt-5"},r.a.createElement("div",{className:"mb-5"},r.a.createElement("h3",null," Mutual Melodies Music Preference Quiz "),r.a.createElement("p",null,"This quiz is designed to give you an understanding of your music listening preference and the different components of it. The quiz determines the kind of music you listen to using the data we get from your Spotify account, and the reasons for your music listening habits by using the answers to the questions below. When completed, we return a code that represents the configuration of your music taste, and then you can find people with similar music listening preferences.")),r.a.createElement("div",{className:"text-center my-5"},r.a.createElement("h1",null,this.state.preferenceCode)),r.a.createElement("div",null,r.a.createElement("ul",{id:"code-explanation",className:"d-none"},r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"First Section: Involvement Level")),r.a.createElement("p",null,"This first section measures how important music is to you and how involved you are. The options are H,M & L (High, Medium, & Low).")),r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"Second Section: 2 Main Usages for Music Listening.")),r.a.createElement("p",null,"This second section shows you your main uses for music, based on your quiz respones. The options are:"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"Coping (Co)")),r.a.createElement("p",null,"You use music to manage and cope with your emotions, almost like a tool.")),r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"Mood Enhancement (Me)")),r.a.createElement("p",null,"Similar to coping, you use music as a tool to manage your moods while doing other things, like homework.")),r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"Personal Identity (Pi)")),r.a.createElement("p",null,"You use music to make an identity for yourself, and you see yourself in the music you listen to.")),r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"Social Identity (Si)")),r.a.createElement("p",null,"You use music to create your social identity among your peers.")))),r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"Third Section: Most Prominent Music Dimension")),r.a.createElement("p",null,"This last section shows you the music dimension that your music falls into. We use these dimensions, as they represent a few different genres that you may listen to as opposed to a specific sone. The options are:"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"Reflective and Complex (RC)")),r.a.createElement("p",null,"This dimension includes genres like blues, jazz, classical, & folk music.")),r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"Intense and Rebellious (IR)")),r.a.createElement("p",null,"This dimension includes genres like rock, alternative, & heavy metal.")),r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"Upbeat and Conventional (UC)")),r.a.createElement("p",null,"This dimension includes genres like country, soundtracks, religious, & pop music")),r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("strong",null,"Energetic and Rhythmic (ER)")),r.a.createElement("p",null,"This dimension includes genres like rap/hip-hop, soul/funk, & electronic/dance music.")))))),r.a.createElement("div",{className:"mt-5"},this.state.questions.map((function(t,a){return r.a.createElement(se,{id:"question--".concat(a),index:a,key:a,text:t.text,category:t.category,updateQuestionResult:e.updateQuizQuestionResult})}))),r.a.createElement("div",{className:"d-flex mb-5"},r.a.createElement(x.a,{className:"pn-primary-button",onClick:this.calculateMusicPreferenceCode.bind(this)},"GENERATE PREFERENCE CODE"),r.a.createElement("h5",{className:"text-danger"},this.state.error)))}}]),a}(n.Component),oe=Object(P.b)((function(e){return{api:e.api?e.api.spotifyApi:null}}))(le),ue=(a(215),a(216),a(217),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loggedIn:!1,token:""},j()(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=function(){window.scrollTo(0,0)};window.addEventListener("hashchange",t),window.addEventListener("beforeunload",t),window.addEventListener("hashchange",(function(){e.checkForLogin()})),this.checkForLogin()}},{key:"checkForLogin",value:function(){var e=function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}("spotifyAccessToken");""!==e&&e!=this.state.token?(this.setState({loggedIn:!0,token:e}),this.props.setSpotifyApi(e)):""===e&&this.setState({loggedIn:!1,token:""})}},{key:"render",value:function(){var e=this.state.loggedIn;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"",id:"app-wrapper"},e?r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement("div",{id:"playlists-view-wrapper"},r.a.createElement(ne.a,null,r.a.createElement(Y.a,null,r.a.createElement(p.a,{exact:!0,path:"(|/profile)",component:z}),r.a.createElement(p.a,{exact:!0,path:"/playlist-builder",component:ae}),r.a.createElement(p.a,{exact:!0,path:"/music-preference-quiz",component:oe}))))):r.a.createElement(T,null)))}}]),a}(r.a.Component)),me=Object(P.b)(null,(function(e){return{setSpotifyApi:function(t){return e(function(e){return function(t){var a=new M.a({clientId:N,redirectUri:"https://playlistninja.app"});a.setAccessToken(e),t({type:"SET_SPOTIFY_API",payload:a})}}(t))}}}))(ue);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=a(37),pe=a(112),fe=Object(de.combineReducers)({api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SPOTIFY_API":return Object($.a)(Object($.a)({},e),{},{spotifyApi:t.payload});case"SET_USER_ID":return Object($.a)(Object($.a)({},e),{},{userId:t.payload});default:return e}},playlist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELECTED_PLAYLIST":return Object($.a)(Object($.a)({},e),{},{selectedPlaylist:t.payload});case"LOAD_EDITABLE_PLAYLISTS":return Object($.a)(Object($.a)({},e),{},{editablePlaylists:t.payload});default:return e}}}),he=a(113);s.a.render(r.a.createElement(P.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(de.createStore)(fe,e,Object(he.composeWithDevTools)(Object(de.applyMiddleware)(pe.a)))}({api:null,playlist:{editablePlaylists:[]}})},r.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},85:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.f6ba9a5c.chunk.js.map